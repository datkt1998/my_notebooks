
<!DOCTYPE html>


<html lang="en" data-content_root="../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>1. Python &#8212; Machine Learning book</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'contents/1_programming_and_frameworks/1_Python';</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="2. NoSQL" href="2_NoSQL.html" />
    <link rel="prev" title="Welcome to Dat’s Notebook" href="../../_jupyterbook_config/intro.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../../_jupyterbook_config/intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../_static/logo.png" class="logo__image only-light" alt="Machine Learning book - Home"/>
    <script>document.write(`<img src="../../_static/logo.png" class="logo__image only-dark" alt="Machine Learning book - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../_jupyterbook_config/intro.html">
                    Welcome to Dat’s Notebook
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">PROGRAMMING &amp; FRAMEWORKS</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">1. Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="2_NoSQL.html">2. NoSQL</a></li>
<li class="toctree-l1"><a class="reference internal" href="3_SQL.html">3. SQL</a></li>
<li class="toctree-l1"><a class="reference internal" href="4_Git.html">4. Git</a></li>
<li class="toctree-l1"><a class="reference internal" href="5_Docker.html">5. Docker</a></li>
<li class="toctree-l1"><a class="reference internal" href="6_PySpark.html">6. PySpark</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">TOPICS &amp; GUIDES</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../4_topics_and_guides/1_mathematics/index.html">1. Mathematics</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../4_topics_and_guides/1_mathematics/1_Linear_algebra.html">1.1. Linear Algebra</a></li>
<li class="toctree-l2"><a class="reference internal" href="../4_topics_and_guides/1_mathematics/2_Calculus_and_optimization.html">1.2. Calculus and Optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../4_topics_and_guides/1_mathematics/3_Distribution_and_statistic.html">1.3. Distribution and Statistic</a></li>
<li class="toctree-l2"><a class="reference internal" href="../4_topics_and_guides/1_mathematics/4_Information_theory.html">1.4. Information Theory</a></li>
<li class="toctree-l2"><a class="reference internal" href="../4_topics_and_guides/1_mathematics/5_Graph_theory.html">1.5. Graph Theory</a></li>
</ul>
</details></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">


<a href="https://github.com/datkt1998/my_notebooks" target="_blank"
   class="btn btn-sm btn-source-repository-button"
   title="Source repository"
   data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>

</a>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../_sources/contents/1_programming_and_frameworks/1_Python.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Python</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#variable-name">1.1. Variable name</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#python-types">1.2. Python Types</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#numbers">1.2.1. Numbers</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#string">1.2.2. String</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#boolean">1.2.3. Boolean</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#lists">1.2.4. Lists</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dictionaries">1.2.5. Dictionaries</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#tuples">1.2.6. Tuples</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#sets">1.2.7. Sets</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#functions">1.3. Functions</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#def">1.3.1. def</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#lambda">1.3.2. lambda</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#advanced-python">1.4. Advanced Python</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#comprehensions">1.4.1. Comprehensions</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#map-filter-reduce">1.4.2. Map Filter Reduce</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#any-all">1.4.3. Any All</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#generators">1.4.4. Generators</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exceptions">1.4.5. Exceptions</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#file-io">1.4.6. File IO</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#regex">1.4.7. Regex</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#multi-threading">1.5. Multi-threading</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#multithreading">1.5.1. MultiThreading</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#ke-thua-class-thread">1.5.1.1. Kế thừa class Thread</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#co-che-thread-lock">1.5.1.2. Cơ chế Thread Lock</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#processing">1.5.2. Processing</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#khoi-tao">1.5.2.1. Khởi tạo</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#process-lock">1.5.2.2. process lock</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#share-memory">1.5.2.3. Share memory</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#share-object">1.5.2.4. Share object</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pool-trong-multiprocessing">1.5.3. Pool trong multiprocessing</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#process-pool-voi-concurrent-futures">1.5.4. Process Pool với concurrent.futures</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#thread-pool">1.5.5. Thread Pool</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#so-sanh-process-pool-va-thread-pool">1.5.6. so sánh process pool và thread pool</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#queue">1.5.7. Queue</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#decorators">1.6. Decorators</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#co-ban-ham-decorator">1.6.1. Cơ bản hàm decorator</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#lop-decorator">1.6.2. Lớp decorator</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#special-decorator">1.6.3. Special decorator</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#decorator-memorization">1.6.4. Decorator memorization</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#go-loi-bang-decorator">1.6.5. Gỡ lỗi bằng decorator</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#class">1.7. Class</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#ham-constructor-initialize-method">1.7.1. Hàm constructor (initialize method)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#attribute">1.7.2. Attribute</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#method">1.7.3. Method</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#regular-method">1.7.3.1. regular method</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#class-method">1.7.3.2. Class method</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#static-method">1.7.3.3. Static method</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#special-method">1.7.3.4. Special Method</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#ke-thua">1.7.4. Kế thừa</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#iterators-and-generators">1.7.5. Iterators and Generators</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#da-hinh">1.7.6. Đa hình</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">1.7.7. Lớp decorator</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">1.7.8. Special decorator</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#metaclass">1.7.9. Metaclass</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="python">
<h1><span class="section-number">1. </span>Python<a class="headerlink" href="#python" title="Link to this heading">#</a></h1>
<section id="variable-name">
<h2><span class="section-number">1.1. </span>Variable name<a class="headerlink" href="#variable-name" title="Link to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Variable không được bắng đầu bằng số</span>
<span class="c1"># ko chứa dấu &#39;-&#39;, được chứa dấu&#39;_&#39;</span>
<span class="c1"># có phân biệt UPCASE</span>
<span class="c1"># không được sử dụng keyword của python gồm </span>
<span class="c1"># Dấu &quot;\&quot; ở cuối dòng thể hiện dòng code sẽ nối tiếp dòng phía dưới</span>
<span class="p">[</span><span class="s1">&#39;and&#39;</span><span class="p">,</span><span class="s1">&#39;as&#39;</span><span class="p">,</span><span class="s1">&#39;assert&#39;</span><span class="p">,</span><span class="s1">&#39;break&#39;</span><span class="p">,</span><span class="s1">&#39;class&#39;</span><span class="p">,</span><span class="s1">&#39;countinue&#39;</span><span class="p">,</span><span class="s1">&#39;def&#39;</span><span class="p">,</span><span class="s1">&#39;del&#39;</span><span class="p">,</span>
 <span class="s1">&#39;elif&#39;</span><span class="p">,</span><span class="s1">&#39;else&#39;</span><span class="p">,</span><span class="s1">&#39;except&#39;</span><span class="p">,</span><span class="s1">&#39;exec&#39;</span><span class="p">,</span><span class="s1">&#39;finally&#39;</span><span class="p">,</span><span class="s1">&#39;for&#39;</span><span class="p">,</span><span class="s1">&#39;from&#39;</span><span class="p">,</span><span class="s1">&#39;global&#39;</span><span class="p">,</span>
 <span class="s1">&#39;if&#39;</span><span class="p">,</span><span class="s1">&#39;import&#39;</span><span class="p">,</span><span class="s1">&#39;in&#39;</span><span class="p">,</span><span class="s1">&#39;is&#39;</span><span class="p">,</span><span class="s1">&#39;lambda&#39;</span><span class="p">,</span><span class="s1">&#39;not&#39;</span><span class="p">,</span><span class="s1">&#39;or&#39;</span><span class="p">,</span><span class="s1">&#39;pass&#39;</span><span class="p">,</span><span class="s1">&#39;print&#39;</span><span class="p">,</span><span class="s1">&#39;raise&#39;</span><span class="p">,</span>
 <span class="s1">&#39;return&#39;</span><span class="p">,</span><span class="s1">&#39;try&#39;</span><span class="p">,</span><span class="s1">&#39;while&#39;</span><span class="p">,</span><span class="s1">&#39;with&#39;</span><span class="p">,</span><span class="s1">&#39;with&#39;</span><span class="p">,</span><span class="s1">&#39;yield&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;and&#39;,
 &#39;as&#39;,
 &#39;assert&#39;,
 &#39;break&#39;,
 &#39;class&#39;,
 &#39;countinue&#39;,
 &#39;def&#39;,
 &#39;del&#39;,
 &#39;elif&#39;,
 &#39;else&#39;,
 &#39;except&#39;,
 &#39;exec&#39;,
 &#39;finally&#39;,
 &#39;for&#39;,
 &#39;from&#39;,
 &#39;global&#39;,
 &#39;if&#39;,
 &#39;import&#39;,
 &#39;in&#39;,
 &#39;is&#39;,
 &#39;lambda&#39;,
 &#39;not&#39;,
 &#39;or&#39;,
 &#39;pass&#39;,
 &#39;print&#39;,
 &#39;raise&#39;,
 &#39;return&#39;,
 &#39;try&#39;,
 &#39;while&#39;,
 &#39;with&#39;,
 &#39;with&#39;,
 &#39;yield&#39;]
</pre></div>
</div>
</div>
</div>
</section>
<section id="python-types">
<h2><span class="section-number">1.2. </span>Python Types<a class="headerlink" href="#python-types" title="Link to this heading">#</a></h2>
<section id="numbers">
<h3><span class="section-number">1.2.1. </span>Numbers<a class="headerlink" href="#numbers" title="Link to this heading">#</a></h3>
<p>Numbers is <code class="docutils literal notranslate"><span class="pre">int</span></code> and <code class="docutils literal notranslate"><span class="pre">float</span></code></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">type</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>   <span class="c1"># int </span>
<span class="nb">type</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">)</span> <span class="c1"># int</span>
<span class="nb">type</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>   <span class="c1"># int</span>
<span class="nb">type</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span> <span class="c1"># float</span>
<span class="nb">type</span><span class="p">(</span><span class="mf">2.2</span><span class="p">)</span> <span class="c1"># float</span>
<span class="nb">type</span><span class="p">(</span><span class="mf">4E2</span><span class="p">)</span> <span class="c1"># float - 4*10 to the power of 2</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>float
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Arithmetic</span>
<span class="mi">10</span> <span class="o">+</span> <span class="mi">3</span>  <span class="c1"># 13</span>
<span class="mi">10</span> <span class="o">-</span> <span class="mi">3</span>  <span class="c1"># 7</span>
<span class="mi">10</span> <span class="o">*</span> <span class="mi">3</span>  <span class="c1"># 30</span>
<span class="mi">10</span> <span class="o">**</span> <span class="mi">3</span> <span class="c1"># 1000</span>
<span class="mi">10</span> <span class="o">/</span> <span class="mi">3</span>  <span class="c1"># 3.3333333333333335</span>
<span class="mi">10</span> <span class="o">//</span> <span class="mi">3</span> <span class="c1"># 3 --&gt; floor division - no decimals and returns an int</span>
<span class="mi">10</span> <span class="o">%</span> <span class="mi">3</span>  <span class="c1"># 1 --&gt; modulo operator - return the reminder. Good for deciding if number is even or odd</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># relationship</span>
<span class="mi">3</span><span class="o">&lt;</span><span class="mi">4</span>
<span class="mi">4</span><span class="o">&gt;</span><span class="mi">3</span>
<span class="mi">3</span><span class="o">&lt;=</span><span class="mi">4</span>
<span class="mi">4</span><span class="o">&lt;=</span><span class="mi">3</span>
<span class="mi">3</span><span class="o">!=</span><span class="mi">4</span>
<span class="mi">3</span><span class="o">==</span><span class="mi">3</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Basic Functions</span>
<span class="nb">pow</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>      <span class="c1"># 25 --&gt; like doing 5**2</span>
<span class="nb">abs</span><span class="p">(</span><span class="o">-</span><span class="mi">50</span><span class="p">)</span>       <span class="c1"># 50</span>
<span class="nb">round</span><span class="p">(</span><span class="mf">5.46</span><span class="p">)</span>    <span class="c1"># 5</span>
<span class="nb">round</span><span class="p">(</span><span class="mf">5.468</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="c1"># 5.47 --&gt; round to nth digit</span>
<span class="nb">bin</span><span class="p">(</span><span class="mi">512</span><span class="p">)</span>       <span class="c1"># &#39;0b1000000000&#39; --&gt;  binary format</span>
<span class="nb">hex</span><span class="p">(</span><span class="mi">512</span><span class="p">)</span>       <span class="c1"># &#39;0x200&#39; --&gt; hexadecimal format</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;0x200&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Converting Strings to Numbers</span>
<span class="n">age</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;How old are you?&quot;</span><span class="p">)</span>
<span class="n">age</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">age</span><span class="p">)</span>
<span class="n">pi</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;What is the value of pi?&quot;</span><span class="p">)</span>
<span class="n">pi</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">pi</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># format</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:3}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="mf">123.456</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:9}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="mf">123.456</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:09}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="mf">123.456</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:09.4f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="mf">123.456</span><span class="p">))</span>
<span class="n">a</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">{:09.4f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="mf">123.456</span><span class="p">)</span> <span class="c1">#type a = str</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">a</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">a</span><span class="p">)))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>123.456
  123.456
00123.456
0123.4560
123.456
123
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># fraction</span>
<span class="kn">from</span> <span class="nn">fractions</span> <span class="kn">import</span><span class="o">*</span>
<span class="n">frac</span><span class="o">=</span><span class="n">Fraction</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">14</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">frac</span><span class="p">))</span>

<span class="n">frac1</span><span class="o">=</span><span class="n">Fraction</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">19</span><span class="p">)</span>
<span class="n">frac2</span><span class="o">=</span><span class="n">frac</span><span class="o">+</span><span class="n">frac1</span>

<span class="nb">print</span><span class="p">(</span><span class="n">frac</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">frac2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;fractions.Fraction&#39;&gt;
1/2
23/38
</pre></div>
</div>
</div>
</div>
</section>
<section id="string">
<h3><span class="section-number">1.2.2. </span>String<a class="headerlink" href="#string" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">type</span><span class="p">(</span><span class="s1">&#39;Hellloooooo&#39;</span><span class="p">)</span> <span class="c1"># str</span>

<span class="s1">&#39;I</span><span class="se">\&#39;</span><span class="s1">m thirsty&#39;</span>
<span class="s2">&quot;I&#39;m thirsty&quot;</span>
<span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="c1"># new line</span>
<span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span> <span class="c1"># adds a tab</span>

<span class="s1">&#39;Hey you!&#39;</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="c1"># y</span>
<span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Andrei Neagoie&#39;</span>
<span class="n">name</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>     <span class="c1"># e</span>
<span class="n">name</span><span class="p">[:]</span>     <span class="c1"># Andrei Neagoie</span>
<span class="n">name</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>    <span class="c1"># ndrei Neagoie</span>
<span class="n">name</span><span class="p">[:</span><span class="mi">1</span><span class="p">]</span>    <span class="c1"># A</span>
<span class="n">name</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>    <span class="c1"># e</span>
<span class="n">name</span><span class="p">[::</span><span class="mi">1</span><span class="p">]</span>   <span class="c1"># Andrei Neagoie</span>
<span class="n">name</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>  <span class="c1"># eiogaeN ierdnA</span>
<span class="n">name</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span><span class="c1"># Ade e</span>
<span class="c1"># : is called slicing and has the format [ start : end : step ]</span>

<span class="s1">&#39;Hi there &#39;</span> <span class="o">+</span> <span class="s1">&#39;Timmy&#39;</span> <span class="c1"># &#39;Hi there Timmy&#39; --&gt; This is called string concatenation</span>
<span class="s1">&#39;*&#39;</span><span class="o">*</span><span class="mi">10</span> <span class="c1"># **********</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;**********&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Basic Functions</span>
<span class="nb">len</span><span class="p">(</span><span class="s1">&#39;turtle&#39;</span><span class="p">)</span> <span class="c1"># 6</span>

<span class="c1"># Basic Methods</span>
<span class="s1">&#39;  I am alone &#39;</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>               <span class="c1"># &#39;I am alone&#39; --&gt; Strips all whitespace characters from both ends.</span>
<span class="s1">&#39;On an island&#39;</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;d&#39;</span><span class="p">)</span>             <span class="c1"># &#39;On an islan&#39; --&gt; # Strips all passed characters from both ends.</span>
<span class="s1">&#39;but life is good!&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>           <span class="c1"># [&#39;but&#39;, &#39;life&#39;, &#39;is&#39;, &#39;good!&#39;]</span>
<span class="s1">&#39;Help me&#39;</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;me&#39;</span><span class="p">,</span> <span class="s1">&#39;you&#39;</span><span class="p">)</span>        <span class="c1"># &#39;Help you&#39; --&gt; Replaces first with second param</span>
<span class="s1">&#39;Need to make fire&#39;</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;Need&#39;</span><span class="p">)</span><span class="c1"># True</span>
<span class="s1">&#39;and cook rice&#39;</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;rice&#39;</span><span class="p">)</span>      <span class="c1"># True</span>
<span class="s1">&#39;bye bye&#39;</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39;e&#39;</span><span class="p">)</span>                  <span class="c1"># 2</span>
<span class="s1">&#39;still there?&#39;</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>                <span class="c1"># STILL THERE?</span>
<span class="s1">&#39;HELLO?!&#39;</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>                     <span class="c1"># hello?!</span>
<span class="s1">&#39;ok, I am done.&#39;</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span>         <span class="c1"># &#39;Ok, I am done.&#39;</span>
<span class="s1">&#39;oh hi there&#39;</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;i&#39;</span><span class="p">)</span>               <span class="c1"># 4 --&gt; returns the starting index position of the first occurrence</span>
<span class="s1">&#39;oh hi there&#39;</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s1">&#39;e&#39;</span><span class="p">)</span>              <span class="c1"># 2</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># String Formatting</span>
<span class="n">name1</span> <span class="o">=</span> <span class="s1">&#39;Andrei&#39;</span>
<span class="n">name2</span> <span class="o">=</span> <span class="s1">&#39;Sunny&#39;</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Hello there </span><span class="si">{</span><span class="n">name1</span><span class="si">}</span><span class="s1"> and </span><span class="si">{</span><span class="n">name2</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>       <span class="c1"># Hello there Andrei and Sunny</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Hello there </span><span class="si">{}</span><span class="s1"> and </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name1</span><span class="p">,</span> <span class="n">name2</span><span class="p">))</span> <span class="c1"># Hello there Andrei and Sunny</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Hello there Andrei and Sunny
Hello there Andrei and Sunny
</pre></div>
</div>
</div>
</div>
</section>
<section id="boolean">
<h3><span class="section-number">1.2.3. </span>Boolean<a class="headerlink" href="#boolean" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">True</span></code> or <code class="docutils literal notranslate"><span class="pre">False</span></code>. Used in a lot of comparison and logical operations in Python</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">bool</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="nb">bool</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># all of the below evaluate to False. Everything else will evaluate to True in Python.</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="nb">bool</span><span class="p">(</span><span class="kc">None</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;2&#39;</span><span class="p">,</span> <span class="nb">bool</span><span class="p">(</span><span class="kc">False</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;3&#39;</span><span class="p">,</span> <span class="nb">bool</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;4&#39;</span><span class="p">,</span> <span class="nb">bool</span><span class="p">(</span><span class="mf">0.0</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;5&#39;</span><span class="p">,</span> <span class="nb">bool</span><span class="p">([]))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;6&#39;</span><span class="p">,</span> <span class="nb">bool</span><span class="p">({}))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;7&#39;</span><span class="p">,</span> <span class="nb">bool</span><span class="p">(()))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;8&#39;</span><span class="p">,</span> <span class="nb">bool</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;9&#39;</span><span class="p">,</span> <span class="nb">bool</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">)))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;10&#39;</span><span class="p">,</span> <span class="nb">bool</span><span class="p">(</span><span class="nb">set</span><span class="p">()))</span>

<span class="c1"># See Logical Operators and Comparison Operators section for more on booleans.</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1 False
2 False
3 False
4 False
5 False
6 False
7 False
8 False
9 False
10 False
</pre></div>
</div>
</div>
</div>
</section>
<section id="lists">
<h3><span class="section-number">1.2.4. </span>Lists<a class="headerlink" href="#lists" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">my_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;3&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">]</span><span class="c1"># We assume this list won&#39;t mutate for each example below</span>
<span class="nb">len</span><span class="p">(</span><span class="n">my_list</span><span class="p">)</span>               <span class="c1"># 4</span>
<span class="n">my_list</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39;3&#39;</span><span class="p">)</span>         <span class="c1"># 2</span>
<span class="n">my_list</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>           <span class="c1"># 1 --&gt; count how many times 2 appears</span>

<span class="n">my_list</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>                 <span class="c1"># True</span>
<span class="n">my_list</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>                <span class="c1"># [2, &#39;3&#39;, True]</span>
<span class="n">my_list</span><span class="p">[:</span><span class="mi">1</span><span class="p">]</span>                <span class="c1"># [1]</span>
<span class="n">my_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>                <span class="c1"># True</span>
<span class="n">my_list</span><span class="p">[::</span><span class="mi">1</span><span class="p">]</span>               <span class="c1"># [1, 2, &#39;3&#39;, True]</span>
<span class="n">my_list</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>              <span class="c1"># [True, &#39;3&#39;, 2, 1]</span>
<span class="n">my_list</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>             <span class="c1"># [1, &#39;3&#39;]</span>

<span class="c1"># : is called slicing and has the format [ start : end : step ]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[1, &#39;3&#39;]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Add to List</span>
<span class="n">my_list</span> <span class="o">*</span> <span class="mi">2</span>                <span class="c1"># [1, 2, &#39;3&#39;, True, 1, 2, &#39;3&#39;, True]</span>
<span class="n">my_list</span> <span class="o">+</span> <span class="p">[</span><span class="mi">100</span><span class="p">]</span>            <span class="c1"># [1, 2, &#39;3&#39;, True, 100] --&gt; doesn&#39;t mutate original list, creates new one</span>
<span class="n">my_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>        <span class="c1"># None --&gt; Mutates original list to [1, 2, &#39;3&#39;, True, 100]          # Or: &lt;list&gt; += [&lt;el&gt;]</span>
<span class="n">my_list</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="mi">100</span><span class="p">,</span> <span class="mi">200</span><span class="p">])</span> <span class="c1"># None --&gt; Mutates original list to [1, 2, &#39;3&#39;, True, 100, 200]</span>
<span class="n">my_list</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;!!!&#39;</span><span class="p">)</span>   <span class="c1"># None --&gt;  [1, 2, &#39;!!!&#39;, &#39;3&#39;, True] - Inserts item at index and moves the rest to the right.</span>

<span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;Hello&#39;</span><span class="p">,</span><span class="s1">&#39;There&#39;</span><span class="p">])</span><span class="c1"># &#39;Hello There&#39; --&gt; Joins elements using string as separator.</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;Hello There&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Copy a List</span>
<span class="n">basket</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;apples&#39;</span><span class="p">,</span> <span class="s1">&#39;pears&#39;</span><span class="p">,</span> <span class="s1">&#39;oranges&#39;</span><span class="p">]</span>
<span class="n">new_basket</span> <span class="o">=</span> <span class="n">basket</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">new_basket2</span> <span class="o">=</span> <span class="n">basket</span><span class="p">[:]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Remove from List</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>    <span class="c1"># 3 --&gt; mutates original list, default index in the pop method is -1 (the last item)</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>   <span class="c1"># 2 --&gt; mutates original list</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="c1"># None --&gt; [1,3] Removes first occurrence of item or raises ValueError.</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>  <span class="c1"># None --&gt; mutates original list and removes all items: []</span>
<span class="k">del</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="c1"># </span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Ordering</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>         <span class="c1"># None --&gt; Mutates list to [1, 2, 3, 5]</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="c1"># None --&gt; Mutates list to [5, 3, 2, 1]</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>      <span class="c1"># None --&gt; Mutates list to [3, 5, 2, 1]</span>
<span class="n">newls</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>          <span class="c1"># [1, 2, 3, 5] --&gt; new list created</span>
<span class="n">newls</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">reversed</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">3</span><span class="p">]))</span>  <span class="c1"># [3, 5, 2, 1] --&gt; reversed() returns an iterator</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Advanced Ordering</span>

<span class="n">sorted_by_second</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">([</span><span class="s1">&#39;hi&#39;</span><span class="p">,</span><span class="s1">&#39;you&#39;</span><span class="p">,</span><span class="s1">&#39;man&#39;</span><span class="p">],</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">el</span><span class="p">:</span> <span class="n">el</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="c1"># [&#39;man&#39;, &#39;hi&#39;, &#39;you&#39;]</span>
<span class="n">sorted_by_key</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">([</span>
                       <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Bina&#39;</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">:</span> <span class="mi">30</span><span class="p">},</span>
                       <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;Andy&#39;</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">:</span> <span class="mi">18</span><span class="p">},</span>
                       <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Zoey&#39;</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">:</span> <span class="mi">55</span><span class="p">}</span>
                        <span class="p">],</span>
                       <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">el</span><span class="p">:</span> <span class="p">(</span><span class="n">el</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]))</span><span class="c1"># [{&#39;name&#39;: &#39;Andy&#39;, &#39;age&#39;: 18}, {&#39;name&#39;: &#39;Bina&#39;, &#39;age&#39;: 30}, {&#39;name&#39;: &#39;Zoey&#39;, &#39;age&#39;: 55}]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Useful operations</span>
<span class="mi">1</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>  <span class="c1"># True</span>
<span class="nb">min</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">])</span><span class="c1"># 1</span>
<span class="nb">max</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">])</span><span class="c1"># 5</span>
<span class="nb">sum</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">])</span><span class="c1"># 15</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>15
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Get First and Last element of a list</span>
<span class="n">mList</span> <span class="o">=</span> <span class="p">[</span><span class="mi">63</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">35</span><span class="p">,</span> <span class="mi">26</span><span class="p">,</span> <span class="mi">77</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">49</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>
<span class="n">first</span><span class="p">,</span> <span class="o">*</span><span class="n">x</span><span class="p">,</span> <span class="n">last</span> <span class="o">=</span> <span class="n">mList</span>
<span class="nb">print</span><span class="p">(</span><span class="n">first</span><span class="p">)</span> <span class="c1">#63</span>
<span class="nb">print</span><span class="p">(</span><span class="n">last</span><span class="p">)</span> <span class="c1">#10</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>63
10
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># List Comprehensions</span>
<span class="c1"># new_list[&lt;action&gt; for &lt;item&gt; in &lt;iterator&gt; if &lt;some condition&gt;]</span>
<span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="s1">&#39;hello&#39;</span><span class="p">]</span>                  <span class="c1"># [&#39;h&#39;, &#39;e&#39;, &#39;l&#39;, &#39;l&#39;, &#39;0&#39;]</span>
<span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="o">*</span><span class="mi">2</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]]</span>                <span class="c1"># [2, 4, 6]</span>
<span class="n">c</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span> <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">]</span><span class="c1"># [0, 2, 4, 6, 8]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Advanced Functions</span>
<span class="n">list_of_chars</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="s1">&#39;Helloooo&#39;</span><span class="p">)</span>                                   <span class="c1"># [&#39;H&#39;, &#39;e&#39;, &#39;l&#39;, &#39;l&#39;, &#39;o&#39;, &#39;o&#39;, &#39;o&#39;, &#39;o&#39;]</span>
<span class="n">sum_of_elements</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">])</span>                                 <span class="c1"># 15</span>
<span class="n">element_sum</span> <span class="o">=</span> <span class="p">[</span><span class="nb">sum</span><span class="p">(</span><span class="n">pair</span><span class="p">)</span> <span class="k">for</span> <span class="n">pair</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">])]</span>         <span class="c1"># [5, 7, 9]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Read line of a file into a list</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;myfile.txt&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">lines</span> <span class="o">=</span> <span class="p">[</span><span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="dictionaries">
<h3><span class="section-number">1.2.5. </span>Dictionaries<a class="headerlink" href="#dictionaries" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">my_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Andrei Neagoie&#39;</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span> <span class="s1">&#39;magic_power&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">}</span>
<span class="n">my_dict</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>                      <span class="c1"># Andrei Neagoie</span>
<span class="nb">len</span><span class="p">(</span><span class="n">my_dict</span><span class="p">)</span>                         <span class="c1"># 3</span>
<span class="nb">list</span><span class="p">(</span><span class="n">my_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>                 <span class="c1"># [&#39;name&#39;, &#39;age&#39;, &#39;magic_power&#39;]</span>
<span class="nb">list</span><span class="p">(</span><span class="n">my_dict</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>               <span class="c1"># [&#39;Andrei Neagoie&#39;, 30, False]</span>
<span class="nb">list</span><span class="p">(</span><span class="n">my_dict</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>                <span class="c1"># [(&#39;name&#39;, &#39;Andrei Neagoie&#39;), (&#39;age&#39;, 30), (&#39;magic_power&#39;, False)]</span>
<span class="n">my_dict</span><span class="p">[</span><span class="s1">&#39;favourite_snack&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Grapes&#39;</span><span class="c1"># {&#39;name&#39;: &#39;Andrei Neagoie&#39;, &#39;age&#39;: 30, &#39;magic_power&#39;: False, &#39;favourite_snack&#39;: &#39;Grapes&#39;}</span>
<span class="n">my_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;age&#39;</span><span class="p">)</span>                   <span class="c1"># 30 --&gt; Returns None if key does not exist.</span>
<span class="n">my_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;ages&#39;</span><span class="p">,</span> <span class="mi">0</span> <span class="p">)</span>              <span class="c1"># 0 --&gt; Returns default (2nd param) if key is not found</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#Remove key</span>
<span class="k">del</span> <span class="n">my_dict</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
<span class="n">my_dict</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;age&#39;</span><span class="p">)</span>
<span class="n">new_dict</span> <span class="o">=</span> <span class="n">my_dict</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># update</span>
<span class="n">my_dict</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;cool&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">})</span>                                         <span class="c1"># {&#39;name&#39;: &#39;Andrei Neagoie&#39;, &#39;age&#39;: 30, &#39;magic_power&#39;: False, &#39;favourite_snack&#39;: &#39;Grapes&#39;, &#39;cool&#39;: True}</span>
<span class="p">{</span><span class="o">**</span><span class="n">my_dict</span><span class="p">,</span> <span class="o">**</span><span class="p">{</span><span class="s1">&#39;cool&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span> <span class="p">}</span>                                         <span class="c1"># {&#39;name&#39;: &#39;Andrei Neagoie&#39;, &#39;age&#39;: 30, &#39;magic_power&#39;: False, &#39;favourite_snack&#39;: &#39;Grapes&#39;, &#39;cool&#39;: True}</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;magic_power&#39;: False, &#39;favourite_snack&#39;: &#39;Grapes&#39;, &#39;cool&#39;: True}
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># create dict</span>
<span class="n">new_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">([[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span><span class="s1">&#39;Andrei&#39;</span><span class="p">],[</span><span class="s1">&#39;age&#39;</span><span class="p">,</span><span class="mi">32</span><span class="p">],[</span><span class="s1">&#39;magic_power&#39;</span><span class="p">,</span><span class="kc">False</span><span class="p">]])</span>  <span class="c1"># Creates a dict from collection of key-value pairs.</span>
<span class="n">new_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">([</span><span class="s1">&#39;name&#39;</span><span class="p">,</span><span class="s1">&#39;age&#39;</span><span class="p">,</span><span class="s1">&#39;magic_power&#39;</span><span class="p">],[</span><span class="s1">&#39;Andrei&#39;</span><span class="p">,</span><span class="mi">32</span><span class="p">,</span> <span class="kc">False</span><span class="p">]))</span><span class="c1"># Creates a dict from two collections.</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Dictionary Comprehension</span>
<span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="n">value</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">new_dict</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s1">&#39;age&#39;</span> <span class="ow">or</span> <span class="n">key</span> <span class="o">==</span> <span class="s1">&#39;name&#39;</span><span class="p">}</span> <span class="c1"># {&#39;name&#39;: &#39;Andrei&#39;, &#39;age&#39;: 32} --&gt; Filter dict by keys</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;name&#39;: &#39;Andrei&#39;, &#39;age&#39;: 32}
</pre></div>
</div>
</div>
</div>
</section>
<section id="tuples">
<h3><span class="section-number">1.2.6. </span>Tuples<a class="headerlink" href="#tuples" title="Link to this heading">#</a></h3>
<p>Like lists, but they are used for immutable things (that don’t change)</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">my_tuple</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;apple&#39;</span><span class="p">,</span><span class="s1">&#39;grapes&#39;</span><span class="p">,</span><span class="s1">&#39;mango&#39;</span><span class="p">,</span> <span class="s1">&#39;grapes&#39;</span><span class="p">)</span>
<span class="n">apple</span><span class="p">,</span> <span class="n">grapes</span><span class="p">,</span> <span class="n">mango</span><span class="p">,</span> <span class="n">grapes</span> <span class="o">=</span> <span class="n">my_tuple</span><span class="c1"># Tuple unpacking</span>
<span class="nb">len</span><span class="p">(</span><span class="n">my_tuple</span><span class="p">)</span>                          <span class="c1"># 4</span>
<span class="n">my_tuple</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>                            <span class="c1"># mango</span>
<span class="n">my_tuple</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>                           <span class="c1"># &#39;grapes&#39;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;grapes&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Immutability</span>
<span class="n">my_tuple</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;donuts&#39;</span>  <span class="c1"># TypeError</span>
<span class="n">my_tuple</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;candy&#39;</span><span class="p">)</span><span class="c1"># AttributeError</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Methods</span>
<span class="n">my_tuple</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39;grapes&#39;</span><span class="p">)</span> <span class="c1"># 1</span>
<span class="n">my_tuple</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s1">&#39;grapes&#39;</span><span class="p">)</span> <span class="c1"># 2</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Zip</span>
<span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">]))</span> <span class="c1"># [(1, 4), (2, 5), (3, 6)]</span>

<span class="c1"># unzip</span>
<span class="n">z</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span> <span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">)]</span> <span class="c1"># Some output of zip() function</span>
<span class="n">unzip</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">z</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">z</span><span class="p">))</span>
<span class="n">unzip</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[(1, 3, 5, 7), (2, 4, 6, 8)]
</pre></div>
</div>
</div>
</div>
</section>
<section id="sets">
<h3><span class="section-number">1.2.7. </span>Sets<a class="headerlink" href="#sets" title="Link to this heading">#</a></h3>
<p>Unordered collection of unique elements.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">my_set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
<span class="n">my_set</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># {1}</span>
<span class="n">my_set</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span><span class="c1"># {1, 100}</span>
<span class="n">my_set</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span><span class="c1"># {1, 100} --&gt; no duplicates!</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">new_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>
<span class="nb">set</span><span class="p">(</span><span class="n">new_list</span><span class="p">)</span>           <span class="c1"># {1, 2, 3, 4, 5, 6}</span>

<span class="n">my_set</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>      <span class="c1"># {1} --&gt; Raises KeyError if element not found</span>
<span class="n">my_set</span><span class="o">.</span><span class="n">discard</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>     <span class="c1"># {1} --&gt; Doesn&#39;t raise an error if element not found</span>
<span class="n">my_set</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>          <span class="c1"># {}</span>
<span class="n">new_set</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">}</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span><span class="c1"># {1,2,3}</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">set1</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">}</span>
<span class="n">set2</span> <span class="o">=</span> <span class="p">{</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">}</span>
<span class="n">set3</span> <span class="o">=</span> <span class="n">set1</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">set2</span><span class="p">)</span>               <span class="c1"># {1,2,3,4,5}</span>
<span class="n">set4</span> <span class="o">=</span> <span class="n">set1</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">set2</span><span class="p">)</span>        <span class="c1"># {3}</span>
<span class="n">set5</span> <span class="o">=</span> <span class="n">set1</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">set2</span><span class="p">)</span>          <span class="c1"># {1, 2}</span>
<span class="n">set6</span> <span class="o">=</span> <span class="n">set1</span><span class="o">.</span><span class="n">symmetric_difference</span><span class="p">(</span><span class="n">set2</span><span class="p">)</span><span class="c1"># {1, 2, 4, 5}</span>
<span class="n">set1</span><span class="o">.</span><span class="n">issubset</span><span class="p">(</span><span class="n">set2</span><span class="p">)</span>                   <span class="c1"># False</span>
<span class="n">set1</span><span class="o">.</span><span class="n">issuperset</span><span class="p">(</span><span class="n">set2</span><span class="p">)</span>                 <span class="c1"># False</span>
<span class="n">set1</span><span class="o">.</span><span class="n">isdisjoint</span><span class="p">(</span><span class="n">set2</span><span class="p">)</span>                 <span class="c1"># False --&gt; return True if two sets have a null intersection.</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>False
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="functions">
<h2><span class="section-number">1.3. </span>Functions<a class="headerlink" href="#functions" title="Link to this heading">#</a></h2>
<section id="def">
<h3><span class="section-number">1.3.1. </span>def<a class="headerlink" href="#def" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">*args</span></code> and <code class="docutils literal notranslate"><span class="pre">**kwargs</span></code></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">some_func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="n">args</span>   <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;z&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">}</span>
<span class="n">some_func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="c1"># same as some_func(1, 2, x=3, y=4, z=5)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
    <span class="c1"># f(1, 2, 3)</span>
    <span class="k">pass</span>

<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>               
    <span class="c1"># f(1, 2, 3)</span>
    <span class="k">pass</span>

<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">z</span><span class="p">):</span>               
    <span class="c1"># f(1, 2, z=3)</span>
    <span class="k">pass</span>

<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">z</span><span class="p">):</span>            
    <span class="c1"># f(1, 2, z=3)</span>
    <span class="k">pass</span>

<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>               
    <span class="c1"># f(x=1, y=2, z=3)</span>
    <span class="k">pass</span>

<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>            
    <span class="c1"># f(x=1, y=2, z=3) | f(1, y=2, z=3)</span>
    <span class="k">pass</span>

<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>        
    <span class="c1"># f(x=1, y=2, z=3) | f(1, y=2, z=3) | f(1, 2, z=3) | f(1, 2, 3)</span>
    <span class="k">pass</span>

<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>     
    <span class="c1"># f(x=1, y=2, z=3) | f(1, y=2, z=3) | f(1, 2, z=3) | f(1, 2, 3)</span>
    <span class="k">pass</span>

<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>     
    <span class="c1"># f(x=1, y=2, z=3) | f(1, y=2, z=3)</span>
    <span class="k">pass</span>

<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>  
    <span class="c1"># f(x=1, y=2, z=3) | f(1, y=2, z=3) | f(1, 2, z=3)</span>
    <span class="k">pass</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="o">*</span><span class="n">a</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>

<span class="n">add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="c1"># 6</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>6
</pre></div>
</div>
</div>
</div>
<p>Other Uses of <code class="docutils literal notranslate"><span class="pre">*</span></code></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="o">*</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="o">*</span><span class="p">[</span><span class="mi">4</span><span class="p">]]</span>                <span class="c1"># [1, 2, 3, 4]</span>
<span class="p">{</span><span class="o">*</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="o">*</span><span class="p">[</span><span class="mi">4</span><span class="p">]}</span>                <span class="c1"># {1, 2, 3, 4}</span>
<span class="p">(</span><span class="o">*</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="o">*</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>                <span class="c1"># (1, 2, 3, 4)</span>
<span class="p">{</span><span class="o">**</span><span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">},</span> <span class="o">**</span><span class="p">{</span><span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}}</span><span class="c1"># {&#39;a&#39;: 1, &#39;b&#39;: 2, &#39;c&#39;: 3}</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;a&#39;: 1, &#39;b&#39;: 2, &#39;c&#39;: 3}
</pre></div>
</div>
</div>
</div>
</section>
<section id="lambda">
<h3><span class="section-number">1.3.2. </span>lambda<a class="headerlink" href="#lambda" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># lambda: &lt;return_value&gt;</span>
<span class="c1"># lambda &lt;argument1&gt;, &lt;argument2&gt;: &lt;return_value&gt;</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Factorial</span>
<span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">reduce</span>
<span class="n">n</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">factorial</span> <span class="o">=</span> <span class="n">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span><span class="o">*</span><span class="n">y</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">factorial</span><span class="p">)</span> <span class="c1">#6</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>6
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Fibonacci</span>
<span class="n">fib</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">n</span> <span class="p">:</span> <span class="n">n</span> <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">1</span> <span class="k">else</span> <span class="n">fib</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">fib</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">fib</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="c1">#55</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>55
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="advanced-python">
<h2><span class="section-number">1.4. </span>Advanced Python<a class="headerlink" href="#advanced-python" title="Link to this heading">#</a></h2>
<section id="comprehensions">
<h3><span class="section-number">1.4.1. </span>Comprehensions<a class="headerlink" href="#comprehensions" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)]</span>         <span class="c1"># [1, 2, ..., 10]</span>
<span class="n">_set</span>  <span class="o">=</span> <span class="p">{</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">}</span>  <span class="c1"># {6, 7, 8, 9}</span>
<span class="n">_iter</span> <span class="o">=</span> <span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">5</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>         <span class="c1"># (5, 6, ..., 14)</span>
<span class="n">_dict</span> <span class="o">=</span> <span class="p">{</span><span class="n">i</span><span class="p">:</span> <span class="n">i</span><span class="o">*</span><span class="mi">2</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)}</span>      <span class="c1"># {0: 0, 1: 2, ..., 9: 18}</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">a</span> <span class="k">if</span> <span class="n">a</span> <span class="k">else</span> <span class="s1">&#39;zero&#39;</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">]]</span> <span class="c1"># [&#39;zero&#39;, 1, &#39;zero&#39;, 3]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;zero&#39;, 1, &#39;zero&#39;, 3]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">output</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="n">j</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)]</span> <span class="c1"># [0, 1, 2, 1, 2, 3, 2, 3, 4]</span>

<span class="c1"># Is the same as:</span>
<span class="n">output</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
        <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="n">j</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="map-filter-reduce">
<h3><span class="section-number">1.4.2. </span>Map Filter Reduce<a class="headerlink" href="#map-filter-reduce" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">reduce</span>
<span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)))</span>            <span class="c1"># [1, 2, 3, 4, 5, 6, 7, 8, 9,10]</span>
<span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)))</span>         <span class="c1"># (6, 7, 8, 9)</span>
<span class="n">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">acc</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="n">acc</span> <span class="o">+</span> <span class="n">x</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>        <span class="c1"># 45</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>45
</pre></div>
</div>
</div>
</div>
</section>
<section id="any-all">
<h3><span class="section-number">1.4.3. </span>Any All<a class="headerlink" href="#any-all" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">any</span><span class="p">([</span><span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">])</span><span class="c1"># True if at least one item in collection is truthy, False if empty.</span>
<span class="nb">all</span><span class="p">([</span><span class="kc">True</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="kc">True</span><span class="p">])</span>     <span class="c1"># True if all items in collection are true</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
</section>
<section id="generators">
<h3><span class="section-number">1.4.4. </span>Generators<a class="headerlink" href="#generators" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">count</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">step</span><span class="p">):</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="k">yield</span> <span class="n">start</span>
        <span class="n">start</span> <span class="o">+=</span> <span class="n">step</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="exceptions">
<h3><span class="section-number">1.4.5. </span>Exceptions<a class="headerlink" href="#exceptions" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="mi">5</span><span class="o">/</span><span class="mi">0</span>
<span class="k">except</span> <span class="ne">ZeroDivisionError</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;No division by zero!&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>No division by zero!
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">x</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Enter your age: &#39;</span><span class="p">))</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Oops!  That was no valid number.  Try again...&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span> <span class="c1"># code that depends on the try block running successfully should be placed in the else block.</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Carry on!&#39;</span><span class="p">)</span>
        <span class="k">break</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Carry on!
</pre></div>
</div>
</div>
</div>
</section>
<section id="file-io">
<h3><span class="section-number">1.4.6. </span>File IO<a class="headerlink" href="#file-io" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>‘r’ - Read (default).</p></li>
<li><p>‘w’ - Write (truncate).</p></li>
<li><p>‘x’ - Write or fail if the file already exists.</p></li>
<li><p>‘a’ - Append.</p></li>
<li><p>‘w+’ - Read and write (truncate).</p></li>
<li><p>‘r+’ - Read and write from the start.</p></li>
<li><p>‘a+’ - Read and write from the end.</p></li>
<li><p>‘t’ - Text mode (default).</p></li>
<li><p>‘b’ - Binary mode.</p></li>
</ul>
</section>
<section id="regex">
<h3><span class="section-number">1.4.7. </span>Regex<a class="headerlink" href="#regex" title="Link to this heading">#</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">re</span>
<span class="o">&lt;</span><span class="nb">str</span><span class="o">&gt;</span>   <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="o">&lt;</span><span class="n">regex</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">new</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># Substitutes all occurrences.</span>
<span class="o">&lt;</span><span class="nb">list</span><span class="o">&gt;</span>  <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="o">&lt;</span><span class="n">regex</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>            <span class="c1"># Returns all occurrences.</span>
<span class="o">&lt;</span><span class="nb">list</span><span class="o">&gt;</span>  <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="o">&lt;</span><span class="n">regex</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">maxsplit</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># Use brackets in regex to keep the matches.</span>
<span class="o">&lt;</span><span class="n">Match</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="o">&lt;</span><span class="n">regex</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>             <span class="c1"># Searches for first occurrence of pattern.</span>
<span class="o">&lt;</span><span class="n">Match</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="o">&lt;</span><span class="n">regex</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>              <span class="c1"># Searches only at the beginning of the text.</span>
</pre></div>
</div>
</section>
</section>
<section id="multi-threading">
<h2><span class="section-number">1.5. </span>Multi-threading<a class="headerlink" href="#multi-threading" title="Link to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="kn">import</span> <span class="nn">random</span>


<span class="k">def</span> <span class="nf">run_operation</span><span class="p">(</span>
    <span class="n">num_op</span><span class="p">,</span> <span class="n">matrix_size</span><span class="o">=</span><span class="mi">128</span><span class="p">,</span> <span class="n">kernel_size</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">float_from</span><span class="o">=-</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">float_to</span><span class="o">=</span><span class="mf">1.0</span>
<span class="p">):</span>
    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_op</span><span class="p">):</span>
        <span class="n">op</span> <span class="o">=</span> <span class="n">Operation</span><span class="p">(</span><span class="n">matrix_size</span><span class="p">,</span> <span class="n">kernel_size</span><span class="p">,</span> <span class="n">float_from</span><span class="p">,</span> <span class="n">float_to</span><span class="p">)</span>
        <span class="n">op</span><span class="p">()</span>
    <span class="k">pass</span>


<span class="k">class</span> <span class="nc">Operation</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">matrix_size</span><span class="o">=</span><span class="mi">128</span><span class="p">,</span> <span class="n">kernel_size</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">float_from</span><span class="o">=-</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">float_to</span><span class="o">=</span><span class="mf">1.0</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">matrix_size</span> <span class="o">=</span> <span class="n">matrix_size</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">kernel_size</span> <span class="o">=</span> <span class="n">kernel_size</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">float_from</span> <span class="o">=</span> <span class="n">float_from</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">float_to</span> <span class="o">=</span> <span class="n">float_to</span>

        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix_size</span> <span class="o">&gt;=</span> <span class="mi">3</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">kernel_size</span> <span class="o">&gt;=</span> <span class="mi">3</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix_size</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">kernel_size</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">_init_matrix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">):</span>
        <span class="n">matrix</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">size</span><span class="p">):</span>
            <span class="n">one_row</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">size</span><span class="p">):</span>
                <span class="n">one_row</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">float_from</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">float_to</span><span class="p">))</span>
            <span class="n">matrix</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">one_row</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">matrix</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_init_matrix</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix_size</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">kernel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_init_matrix</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">kernel_size</span><span class="p">)</span>

        <span class="n">nloop</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix_size</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">kernel_size</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_init_matrix</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">nloop</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">my</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nloop</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">mx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nloop</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">ky</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kernel_size</span><span class="p">):</span>
                    <span class="k">for</span> <span class="n">kx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kernel_size</span><span class="p">):</span>
                        <span class="n">kernel_val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">kernel</span><span class="p">[</span><span class="n">ky</span><span class="p">][</span><span class="n">kx</span><span class="p">]</span>
                        <span class="n">matrix_val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="n">my</span> <span class="o">+</span> <span class="n">ky</span><span class="p">][</span><span class="n">mx</span> <span class="o">+</span> <span class="n">kx</span><span class="p">]</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="p">[</span><span class="n">my</span><span class="p">][</span><span class="n">mx</span><span class="p">]</span> <span class="o">=</span> <span class="n">matrix_val</span> <span class="o">*</span> <span class="n">kernel_val</span>
        <span class="k">return</span> <span class="kc">True</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Threading</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">threading</span>


<span class="k">class</span> <span class="nc">MultiThread</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num_thread</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">num_op</span><span class="o">=</span><span class="mi">100</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">num_thread</span> <span class="o">=</span> <span class="n">num_thread</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">num_op</span> <span class="o">=</span> <span class="n">num_op</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_thread</span> <span class="o">&gt;</span> <span class="mi">0</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_op</span> <span class="o">&gt;</span> <span class="mi">0</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">thread_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_thread</span><span class="p">):</span>
            <span class="n">t</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">run_operation</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_op</span><span class="p">,))</span>
            <span class="n">t</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
            <span class="n">thread_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">thread_list</span><span class="p">)):</span>
            <span class="n">t</span> <span class="o">=</span> <span class="n">thread_list</span><span class="p">[</span><span class="n">_</span><span class="p">]</span>
            <span class="n">t</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>

        <span class="k">pass</span>
    
<span class="k">def</span> <span class="nf">main_threading</span><span class="p">(</span><span class="n">num_cpus</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">num_ops</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
    <span class="n">tstart</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
    <span class="n">multi</span> <span class="o">=</span> <span class="n">MultiThread</span><span class="p">(</span><span class="n">num_thread</span><span class="o">=</span><span class="n">num_cpus</span><span class="p">,</span> <span class="n">num_op</span><span class="o">=</span><span class="n">num_ops</span><span class="p">)</span>
    <span class="n">multi</span><span class="p">()</span>
    <span class="n">tend</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Time for running </span><span class="si">%d</span><span class="s2"> threads (</span><span class="si">%d</span><span class="s2"> ops) is </span><span class="si">%.2f</span><span class="s2"> seconds&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">num_cpus</span><span class="p">,</span> <span class="n">num_ops</span><span class="p">,</span> <span class="n">tend</span><span class="o">-</span><span class="n">tstart</span><span class="p">))</span>
    
<span class="n">main_threading</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Time for running 4 threads (10 ops) is 2.42 seconds
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">threading</span><span class="o">.</span><span class="n">active_count</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>6
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># processing</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">multiprocessing</span> <span class="kn">import</span> <span class="n">Process</span>


<span class="k">class</span> <span class="nc">MultiProcess</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num_process</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">num_op</span><span class="o">=</span><span class="mi">100</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">num_process</span> <span class="o">=</span> <span class="n">num_process</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">num_op</span> <span class="o">=</span> <span class="n">num_op</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_process</span> <span class="o">&gt;</span> <span class="mi">0</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_op</span> <span class="o">&gt;</span> <span class="mi">0</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">process_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_process</span><span class="p">):</span>
            <span class="n">p</span> <span class="o">=</span> <span class="n">Process</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">run_operation</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">num_op</span><span class="p">,))</span>
            <span class="n">p</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
            <span class="n">process_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">process_list</span><span class="p">)):</span>
            <span class="n">p</span> <span class="o">=</span> <span class="n">process_list</span><span class="p">[</span><span class="n">_</span><span class="p">]</span>
            <span class="n">p</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>

        <span class="k">pass</span>
    
<span class="k">def</span> <span class="nf">main_processing</span><span class="p">(</span><span class="n">num_cpus</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">num_ops</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
    <span class="n">tstart</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
    <span class="n">multi</span> <span class="o">=</span> <span class="n">MultiProcess</span><span class="p">(</span><span class="n">num_process</span><span class="o">=</span><span class="n">num_cpus</span><span class="p">,</span> <span class="n">num_op</span><span class="o">=</span><span class="n">num_ops</span><span class="p">)</span>
    <span class="n">multi</span><span class="p">()</span>
    <span class="n">tend</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Time for running </span><span class="si">%d</span><span class="s2"> processes (</span><span class="si">%d</span><span class="s2"> ops) is </span><span class="si">%.2f</span><span class="s2"> seconds&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">num_cpus</span><span class="p">,</span> <span class="n">num_ops</span><span class="p">,</span> <span class="n">tend</span><span class="o">-</span><span class="n">tstart</span><span class="p">))</span>
    
<span class="n">main_processing</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Time for running 4 processes (10 ops) is 0.07 seconds
</pre></div>
</div>
</div>
</div>
<p><a class="reference external" href="https://codelearn.io/sharing/lap-trinh-da-tien-trinh">https://codelearn.io/sharing/lap-trinh-da-tien-trinh</a></p>
<ul class="simple">
<li><p>Nên chạy threading khi các luồng cần dùng chung tham số, còn processing khi các tiến trình chạy độc lập với nhau</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">multiprocessing</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Số lượng cpu : &quot;</span><span class="p">,</span> <span class="n">multiprocessing</span><span class="o">.</span><span class="n">cpu_count</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Số lượng cpu :  16
</pre></div>
</div>
</div>
</div>
<section id="multithreading">
<h3><span class="section-number">1.5.1. </span>MultiThreading<a class="headerlink" href="#multithreading" title="Link to this heading">#</a></h3>
<section id="ke-thua-class-thread">
<h4><span class="section-number">1.5.1.1. </span>Kế thừa class Thread<a class="headerlink" href="#ke-thua-class-thread" title="Link to this heading">#</a></h4>
<ul class="simple">
<li><p>các threads là bất đồng bộ (asynchronous). Hai threads chạy độc lập với nhau mà không theo thứ tự.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">threading</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="k">class</span> <span class="nc">FirstThread</span><span class="p">(</span><span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">thread_id</span><span class="p">,</span> <span class="n">thread_name</span><span class="p">,</span> <span class="n">counter</span><span class="p">):</span>
        <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">thread_id</span> <span class="o">=</span> <span class="n">thread_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">thread_name</span> <span class="o">=</span> <span class="n">thread_name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">counter</span> <span class="o">=</span> <span class="n">counter</span>

    <span class="c1"># sửa lại hàm run để chạy operator</span>
    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Start thread </span><span class="si">{}</span><span class="s2">!&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">thread_name</span><span class="p">))</span>
        <span class="k">while</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">counter</span><span class="p">):</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.01</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> : </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">thread_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">counter</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">counter</span> <span class="o">-=</span> <span class="mi">1</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;End thread </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">thread_name</span><span class="p">))</span>

<span class="n">thread1</span> <span class="o">=</span> <span class="n">FirstThread</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;khanh thread&quot;</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="n">thread2</span> <span class="o">=</span> <span class="n">FirstThread</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;ai thread&quot;</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>

<span class="n">thread1</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="n">thread2</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Start thread khanh thread!
Start thread ai thread!
khanh thread : 5
ai thread : 5
khanh thread : 4
ai thread : 4
khanh thread : 3
ai thread : 3
khanh thread : 2
ai thread : 2
khanh thread : 1
End thread khanh thread
ai thread : 1
End thread ai thread
</pre></div>
</div>
</div>
</div>
</section>
<section id="co-che-thread-lock">
<h4><span class="section-number">1.5.1.2. </span>Cơ chế Thread Lock<a class="headerlink" href="#co-che-thread-lock" title="Link to this heading">#</a></h4>
<ul class="simple">
<li><p>Chúng ta có thể đồng bộ (synchronous) các thread. Tức là cho phép một thread chạy xong thì thread khác mới được phép chạy bằng cách sử dụng <code class="docutils literal notranslate"><span class="pre">Thread</span> <span class="pre">Lock</span></code> trong python.</p></li>
<li><p>Trong hàm <code class="docutils literal notranslate"><span class="pre">run()</span></code> của thread thì chỉ cần thêm hàm <code class="docutils literal notranslate"><span class="pre">thread.acquire()</span></code> và <code class="docutils literal notranslate"><span class="pre">thread.release()</span></code> vào đầu và cuối hàm thì luồng sẽ được locking cho đến khi thread chạy xong thì thread khác mới được xử lý tiếp</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">threading</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="k">class</span> <span class="nc">FirstThread</span><span class="p">(</span><span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">thread_id</span><span class="p">,</span> <span class="n">thread_name</span><span class="p">,</span> <span class="n">counter</span><span class="p">):</span>
        <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">thread_id</span> <span class="o">=</span> <span class="n">thread_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">thread_name</span> <span class="o">=</span> <span class="n">thread_name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">counter</span> <span class="o">=</span> <span class="n">counter</span>

    <span class="c1"># sửa lại hàm run để chạy operator</span>
    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">threadLock</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span> <span class="c1"># mở luồng lock thread - ko còn chạy multithreading nữa</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Start thread </span><span class="si">{}</span><span class="s2">!&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">thread_name</span><span class="p">))</span>
        <span class="k">while</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">counter</span><span class="p">):</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.01</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> : </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">thread_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">counter</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">counter</span> <span class="o">-=</span> <span class="mi">1</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;End thread </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">thread_name</span><span class="p">))</span>
        <span class="n">threadLock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span> <span class="c1"># đóng lại luồng lock thread</span>

<span class="n">threadLock</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Lock</span><span class="p">()</span>
<span class="n">thread1</span> <span class="o">=</span> <span class="n">FirstThread</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;khanh thread&quot;</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="n">thread2</span> <span class="o">=</span> <span class="n">FirstThread</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;ai thread&quot;</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>

<span class="n">thread1</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="n">thread2</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

<span class="n">threads</span> <span class="o">=</span> <span class="p">[</span><span class="n">thread1</span><span class="p">,</span> <span class="n">thread2</span><span class="p">]</span>

<span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">threads</span><span class="p">:</span>
    <span class="n">t</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Start thread khanh thread!
khanh thread : 5
khanh thread : 4
khanh thread : 3
khanh thread : 2
khanh thread : 1
End thread khanh thread
Start thread ai thread!
ai thread : 5
ai thread : 4
ai thread : 3
ai thread : 2
ai thread : 1
End thread ai thread
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="processing">
<h3><span class="section-number">1.5.2. </span>Processing<a class="headerlink" href="#processing" title="Link to this heading">#</a></h3>
<section id="khoi-tao">
<h4><span class="section-number">1.5.2.1. </span>Khởi tạo<a class="headerlink" href="#khoi-tao" title="Link to this heading">#</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">multiprocessing</span> <span class="kn">import</span> <span class="n">Process</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="k">def</span> <span class="nf">_counter</span><span class="p">(</span><span class="n">counter</span><span class="p">,</span> <span class="n">process_name</span><span class="p">):</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">counter</span><span class="p">):</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.01</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">process_name</span><span class="p">,</span> <span class="n">counter</span><span class="p">))</span>
        <span class="n">counter</span> <span class="o">-=</span> <span class="mi">1</span>
        
<span class="k">def</span> <span class="nf">operator</span><span class="p">():</span>
    <span class="n">counter</span> <span class="o">=</span> <span class="mi">5</span>

    <span class="n">exec1</span> <span class="o">=</span> <span class="n">Process</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">_counter</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">counter</span><span class="p">,</span> <span class="s2">&quot;khanh thread&quot;</span><span class="p">))</span> <span class="c1"># pass counter and thread_name into method _counter</span>
    <span class="n">exec2</span> <span class="o">=</span> <span class="n">Process</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">_counter</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">counter</span><span class="p">,</span> <span class="s2">&quot;ai thread&quot;</span><span class="p">))</span>

    <span class="n">exec1</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
    <span class="n">exec2</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
    <span class="n">execs</span> <span class="o">=</span>  <span class="p">[</span><span class="n">exec1</span><span class="p">,</span><span class="n">exec2</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">exec</span> <span class="ow">in</span> <span class="n">execs</span><span class="p">:</span>
        <span class="c1"># lệnh join() để đảm bảo main process hoàn thành sau cùng sau khi các child process khác kết thúc.</span>
        <span class="n">exec</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
        
<span class="n">operator</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="process-lock">
<h4><span class="section-number">1.5.2.2. </span>process lock<a class="headerlink" href="#process-lock" title="Link to this heading">#</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Sử dụng lock để chạy đồng bộ, tức là process chạy không song song mà chạy lần lượt</span>

<span class="kn">from</span> <span class="nn">multiprocessing</span> <span class="kn">import</span> <span class="n">Process</span><span class="p">,</span> <span class="n">Lock</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="k">def</span> <span class="nf">_counter_lock</span><span class="p">(</span><span class="n">counter</span><span class="p">,</span> <span class="n">process_name</span><span class="p">,</span> <span class="n">lock</span><span class="p">):</span>
    <span class="n">lock</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">counter</span><span class="p">):</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.01</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">process_name</span><span class="p">,</span> <span class="n">counter</span><span class="p">))</span>
        <span class="n">counter</span> <span class="o">-=</span> <span class="mi">1</span>
    <span class="n">lock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>

<span class="n">counter</span> <span class="o">=</span> <span class="mi">5</span>

<span class="n">lock</span> <span class="o">=</span> <span class="n">Lock</span><span class="p">()</span>
<span class="n">exec1</span> <span class="o">=</span> <span class="n">Process</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">_counter_lock</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">counter</span><span class="p">,</span> <span class="s2">&quot;khanh thread&quot;</span><span class="p">,</span> <span class="n">lock</span><span class="p">))</span> <span class="c1"># pass counter and thread_name into method _counter</span>
<span class="n">exec2</span> <span class="o">=</span> <span class="n">Process</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">_counter_lock</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">counter</span><span class="p">,</span> <span class="s2">&quot;ai thread&quot;</span><span class="p">,</span> <span class="n">lock</span><span class="p">))</span>
<span class="n">execs</span> <span class="o">=</span> <span class="p">[</span><span class="n">exec1</span><span class="p">,</span> <span class="n">exec2</span><span class="p">]</span>

<span class="k">for</span> <span class="n">exec</span> <span class="ow">in</span> <span class="n">execs</span><span class="p">:</span>
    <span class="n">exec</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
    
<span class="n">execs</span> <span class="o">=</span>  <span class="p">[</span><span class="n">exec1</span><span class="p">,</span><span class="n">exec2</span><span class="p">]</span>
<span class="k">for</span> <span class="n">exec</span> <span class="ow">in</span> <span class="n">execs</span><span class="p">:</span>
    <span class="c1"># lệnh join() để đảm bảo main process hoàn thành sau cùng sau khi các child process khác kết thúc.</span>
    <span class="n">exec</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="share-memory">
<h4><span class="section-number">1.5.2.3. </span>Share memory<a class="headerlink" href="#share-memory" title="Link to this heading">#</a></h4>
<ul class="simple">
<li><p>Cung cấp bộ nhớ chung như value , array giữa 2 process</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># NẾU CHẠY THẾ NÀY THÌ ARRAY ko được dùng chung</span>
<span class="kn">from</span> <span class="nn">multiprocessing</span> <span class="kn">import</span> <span class="n">Process</span><span class="p">,</span> <span class="n">Lock</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="c1"># hàm đổi dấu phần tử</span>
<span class="k">def</span> <span class="nf">_counter_arr</span><span class="p">(</span><span class="n">arrs</span><span class="p">,</span> <span class="n">process_name</span><span class="p">,</span><span class="n">lock</span><span class="p">):</span>
    <span class="n">lock</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">el</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">arrs</span><span class="p">):</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.01</span><span class="p">)</span>
        <span class="n">arrs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="n">arrs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> 
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">process_name</span><span class="p">,</span> <span class="n">arrs</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span>
    <span class="n">lock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span><span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
	<span class="n">arrs</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
	<span class="n">lock</span> <span class="o">=</span> <span class="n">Lock</span><span class="p">()</span>
	<span class="n">exec1</span> <span class="o">=</span> <span class="n">Process</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">_counter_arr</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">arrs</span><span class="p">,</span> <span class="s2">&quot;khanh process&quot;</span><span class="p">,</span><span class="n">lock</span><span class="p">))</span> <span class="c1"># pass counter and thread_name into method _counter</span>
	<span class="n">exec2</span> <span class="o">=</span> <span class="n">Process</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">_counter_arr</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">arrs</span><span class="p">,</span> <span class="s2">&quot;ai process&quot;</span><span class="p">,</span><span class="n">lock</span><span class="p">))</span>
	<span class="n">execs</span> <span class="o">=</span> <span class="p">[</span><span class="n">exec1</span><span class="p">,</span> <span class="n">exec2</span><span class="p">]</span>

	<span class="n">exec1</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
	<span class="n">exec2</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

	<span class="k">for</span> <span class="n">exec</span> <span class="ow">in</span> <span class="n">execs</span><span class="p">:</span>
		<span class="n">exec</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<img src="_images/python/3149f022-e9d6-4523-a263-1df03e2d0dff.png"><div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">multiprocessing</span> <span class="kn">import</span> <span class="n">Process</span><span class="p">,</span> <span class="n">Value</span><span class="p">,</span> <span class="n">Array</span><span class="p">,</span> <span class="n">Lock</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="k">def</span> <span class="nf">_counter_arr</span><span class="p">(</span><span class="n">arrs</span><span class="p">,</span> <span class="n">process_name</span><span class="p">):</span>
    <span class="n">lock</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">el</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">arrs</span><span class="p">):</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.01</span><span class="p">)</span>
        <span class="n">arrs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="n">arrs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">process_name</span><span class="p">,</span> <span class="n">arrs</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span>
    <span class="n">lock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>
    
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span><span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">arrs</span> <span class="o">=</span> <span class="n">Array</span><span class="p">(</span><span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
    <span class="n">lock</span> <span class="o">=</span> <span class="n">Lock</span><span class="p">()</span>
    <span class="n">exec1</span> <span class="o">=</span> <span class="n">Process</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">_counter_arr</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">arrs</span><span class="p">,</span> <span class="s2">&quot;khanh process&quot;</span><span class="p">))</span> <span class="c1"># pass counter and thread_name into method _counter</span>
    <span class="n">exec2</span> <span class="o">=</span> <span class="n">Process</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">_counter_arr</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">arrs</span><span class="p">,</span> <span class="s2">&quot;ai process&quot;</span><span class="p">))</span>
    <span class="n">execs</span> <span class="o">=</span> <span class="p">[</span><span class="n">exec1</span><span class="p">,</span> <span class="n">exec2</span><span class="p">]</span>

    <span class="n">exec1</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
    <span class="n">exec2</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">exec</span> <span class="ow">in</span> <span class="n">execs</span><span class="p">:</span>
        <span class="n">exec</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<img src="_images/python/ea184e05-69ec-4a3e-b5ec-112742247b73.png">
<ul class="simple">
<li><p>Giả định bạn đang có một pipeline biến đổi dữ liệu gồm nhiều step khác nhau, mỗi một process sẽ phụ trách một step trong pipeline. Khi đó dữ liệu cần được shared chung giữa các process.</p></li>
</ul>
</section>
<section id="share-object">
<h4><span class="section-number">1.5.2.4. </span>Share object<a class="headerlink" href="#share-object" title="Link to this heading">#</a></h4>
<ul class="simple">
<li><p>Queue là một định dạng stack an toàn khi làm việc với multi thread và process. Chúng ta có thể tạo ra một queue và cho phép các thread, process truy cập dữ liệu mà không bị hiện tượng concurrency vì dữ liệu được truy suất và sử dụng một lần bởi một thread hoặc process</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">multiprocessing</span> <span class="kn">import</span> <span class="n">Process</span><span class="p">,</span> <span class="n">Queue</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="k">def</span> <span class="nf">_counter_queue</span><span class="p">(</span><span class="n">queue</span><span class="p">,</span> <span class="n">process_name</span><span class="p">,</span> <span class="n">max_count</span><span class="p">):</span>
    <span class="c1"># lock.acquire()</span>
    <span class="k">while</span> <span class="n">max_count</span><span class="p">:</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.01</span><span class="p">)</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">queue</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">process_name</span><span class="p">,</span> <span class="n">value</span><span class="p">))</span>
        <span class="n">max_count</span> <span class="o">-=</span> <span class="mi">1</span>
    <span class="c1"># lock.release()</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span><span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<span class="c1"># dữ liệu q được xử dụng lần lượt lên ko data nào được sử dụng chung giữa 2 processes nên tránh được concurrency</span>
    <span class="n">starttime</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">datetime</span><span class="p">()</span>
    <span class="n">q</span> <span class="o">=</span> <span class="n">Queue</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
        <span class="n">q</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>

    <span class="n">max_count</span> <span class="o">=</span> <span class="mi">5</span>
    <span class="c1"># lock = Lock()</span>
    <span class="n">exec1</span> <span class="o">=</span> <span class="n">Process</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">_counter_queue</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">q</span><span class="p">,</span> <span class="s2">&quot;khanh process&quot;</span><span class="p">,</span> <span class="n">max_count</span><span class="p">))</span> <span class="c1"># pass counter and thread_name into method _counter</span>
    <span class="n">exec2</span> <span class="o">=</span> <span class="n">Process</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">_counter_queue</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">q</span><span class="p">,</span> <span class="s2">&quot;ai process&quot;</span><span class="p">,</span> <span class="n">max_count</span><span class="p">))</span>
    <span class="n">execs</span> <span class="o">=</span> <span class="p">[</span><span class="n">exec1</span><span class="p">,</span> <span class="n">exec2</span><span class="p">]</span>

    <span class="n">exec1</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
    <span class="n">exec2</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">exec</span> <span class="ow">in</span> <span class="n">execs</span><span class="p">:</span>
        <span class="n">exec</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">datetime</span><span class="p">()</span><span class="o">-</span><span class="n">starttime</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">multiprocessing</span> <span class="kn">import</span> <span class="n">Process</span><span class="p">,</span> <span class="n">Queue</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>

<span class="k">def</span> <span class="nf">_counter_queue</span><span class="p">(</span><span class="n">queue</span><span class="p">,</span> <span class="n">process_name</span><span class="p">,</span> <span class="n">max_count</span><span class="p">):</span>
    <span class="c1"># lock.acquire()</span>
    <span class="k">while</span> <span class="n">max_count</span><span class="p">:</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.01</span><span class="p">)</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">queue</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="c1"># print(&quot;{}: {}&quot;.format(process_name, value))</span>
        <span class="n">max_count</span> <span class="o">-=</span> <span class="mi">1</span>
    <span class="c1"># lock.release()</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span><span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<span class="c1"># dữ liệu q được xử dụng lần lượt lên ko data nào được sử dụng chung giữa 2 processes nên tránh được concurrency</span>
	<span class="n">starttime</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
	<span class="n">q</span> <span class="o">=</span> <span class="n">Queue</span><span class="p">()</span>
	<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1000</span><span class="p">):</span>
		<span class="n">q</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>

	<span class="n">max_count</span> <span class="o">=</span> <span class="mi">200</span>
    <span class="c1"># lock = Lock()</span>
	<span class="n">execs</span> <span class="o">=</span> <span class="p">[]</span>
	<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
		<span class="n">exe</span> <span class="o">=</span> <span class="n">Process</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">_counter_queue</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">q</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2"> process&quot;</span><span class="p">,</span> <span class="n">max_count</span><span class="p">))</span> <span class="c1"># pass counter and thread_name into method _counter</span>
		<span class="n">execs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">exe</span><span class="p">)</span>
		
	<span class="k">for</span> <span class="n">exe</span> <span class="ow">in</span> <span class="n">execs</span><span class="p">:</span>
		<span class="n">exe</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
		
	<span class="k">for</span> <span class="n">exe</span> <span class="ow">in</span> <span class="n">execs</span><span class="p">:</span>
		<span class="n">exe</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
		
	<span class="c1"># for value in range(1000):</span>
	<span class="c1"># 	time.sleep(0.01)</span>
	<span class="c1"># 	# value = queue.get()</span>
	<span class="c1"># print(&quot;{}: {}&quot;.format(&#39;process_name&#39;, value))</span>

	<span class="nb">print</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">-</span><span class="n">starttime</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="pool-trong-multiprocessing">
<h3><span class="section-number">1.5.3. </span>Pool trong multiprocessing<a class="headerlink" href="#pool-trong-multiprocessing" title="Link to this heading">#</a></h3>
<p>Trong python chúng ta có thể sử dụng pool để tận dụng được các tính toán song song trên nhiều process một lúc. Cơ chế của pool đã loại bỏ hạn chế của GIL trong python, cho phép nhiều luồng hoạt động đồng thời và giúp đẩy nhanh quá trình tính toán.</p>
<p>Trong Pool chúng ta có thể khai báo nhiều workers cùng thực hiện chương trình. Các chương trình có thể thực hiện một cách bất đồng bộ thông qua hàm <code class="docutils literal notranslate"><span class="pre">apply_async()</span></code>. Tức là cho phép thực hiện song song nhiều method trên các workers. Đồng thời <code class="docutils literal notranslate"><span class="pre">apply_async()</span></code> cũng cho phép đưa vào các hàm <code class="docutils literal notranslate"><span class="pre">callback</span></code> để xử lý giữa liệu sau cùng.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># sử dụng 5 workers để tính toán bất đồng bộ bình phương của các số trong phạm vi 20. Kết quả sau khi tính sẽ được lưu vào một list</span>
<span class="kn">import</span> <span class="nn">multiprocessing</span> <span class="k">as</span> <span class="nn">mp</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="k">def</span> <span class="nf">_square</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span><span class="o">*</span><span class="n">x</span>

<span class="k">def</span> <span class="nf">log_result</span><span class="p">(</span><span class="n">result</span><span class="p">):</span>
  <span class="c1"># Hàm được gọi bất kỳ khi nào _square(i) trả ra kết quả.</span>
  <span class="c1"># result_list được thực hiện trên main process, khong phải pool workers.</span>
    <span class="n">result_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">apply_async_with_callback</span><span class="p">():</span>
    <span class="n">pool</span> <span class="o">=</span> <span class="n">mp</span><span class="o">.</span><span class="n">Pool</span><span class="p">(</span><span class="n">processes</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">):</span>
        <span class="n">pool</span><span class="o">.</span><span class="n">apply_async</span><span class="p">(</span><span class="n">_square</span><span class="p">,</span> <span class="n">args</span> <span class="o">=</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="p">),</span> <span class="n">callback</span> <span class="o">=</span> <span class="n">log_result</span><span class="p">)</span>
    <span class="n">pool</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="n">pool</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">result_list</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">result_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">apply_async_with_callback</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="process-pool-voi-concurrent-futures">
<h3><span class="section-number">1.5.4. </span>Process Pool với concurrent.futures<a class="headerlink" href="#process-pool-voi-concurrent-futures" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">concurrent.futures</span> <span class="kn">import</span> <span class="n">ProcessPoolExecutor</span>
<span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">sleep</span>
<span class="kn">import</span> <span class="nn">timeit</span>

<span class="k">def</span> <span class="nf">_counter</span><span class="p">(</span><span class="n">counter</span><span class="p">,</span> <span class="n">task_name</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Start process </span><span class="si">{}</span><span class="s2">!&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">task_name</span><span class="p">))</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">counter</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> : </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">task_name</span><span class="p">,</span> <span class="n">counter</span><span class="p">))</span>
        <span class="n">counter</span> <span class="o">-=</span> <span class="mi">1</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;End process </span><span class="si">{}</span><span class="s2">!&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">task_name</span><span class="p">))</span>
    <span class="k">return</span> <span class="s2">&quot;Completed </span><span class="si">{}</span><span class="s2">!&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">task_name</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_submit_process</span><span class="p">():</span>
    <span class="n">executor</span> <span class="o">=</span> <span class="n">ProcessPoolExecutor</span><span class="p">(</span><span class="n">max_workers</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
    <span class="n">future</span> <span class="o">=</span> <span class="n">executor</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">_counter</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="s2">&quot;task1&quot;</span><span class="p">)</span> <span class="c1"># Tham số truyền vào là tên hàm và các đối số của hàm</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;State of future: &#39;</span><span class="p">,</span> <span class="n">future</span><span class="o">.</span><span class="n">done</span><span class="p">())</span>  <span class="c1"># để kiểm tra trạng thái của task, task chưa hoàn thành nên  future.done() == False</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;futre result: &#39;</span><span class="p">,</span> <span class="n">future</span><span class="o">.</span><span class="n">result</span><span class="p">())</span> <span class="c1"># thường được dùng để kiểm tra kết quả sau khi task cuối cùng trong process pool đã thực thi xong</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;State of future: &#39;</span><span class="p">,</span> <span class="n">future</span><span class="o">.</span><span class="n">done</span><span class="p">())</span> <span class="c1"># task đã hoàn thành nên  future.done() == True</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span><span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">_submit_process</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># sử dụng hàm map để truyền theo từng phần tử của list</span>

<span class="kn">from</span> <span class="nn">concurrent.futures</span> <span class="kn">import</span> <span class="n">ProcessPoolExecutor</span>
<span class="kn">from</span> <span class="nn">concurrent.futures</span> <span class="kn">import</span> <span class="n">as_completed</span>
<span class="n">x1s</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">35</span><span class="p">]</span>
<span class="n">x2s</span> <span class="o">=</span> <span class="p">[</span><span class="mi">15</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">55</span><span class="p">]</span>
<span class="n">y1s</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">]</span>
<span class="n">y2s</span> <span class="o">=</span> <span class="p">[</span><span class="mi">15</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">35</span><span class="p">]</span>

<span class="k">def</span> <span class="nf">_bbox</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">y2</span><span class="p">):</span>
    <span class="n">w</span> <span class="o">=</span> <span class="n">x2</span><span class="o">-</span><span class="n">x1</span>
    <span class="n">h</span> <span class="o">=</span> <span class="n">y2</span><span class="o">-</span><span class="n">y1</span>
    <span class="n">area</span> <span class="o">=</span> <span class="n">w</span><span class="o">*</span><span class="n">h</span>
    <span class="k">return</span> <span class="n">area</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span><span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    
    <span class="k">with</span> <span class="n">ProcessPoolExecutor</span><span class="p">(</span><span class="n">max_workers</span> <span class="o">=</span> <span class="mi">5</span><span class="p">)</span> <span class="k">as</span> <span class="n">executor</span><span class="p">:</span>
        <span class="n">results</span> <span class="o">=</span> <span class="n">executor</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">_bbox</span><span class="p">,</span> <span class="n">x1s</span><span class="p">,</span> <span class="n">x2s</span><span class="p">,</span> <span class="n">y1s</span><span class="p">,</span> <span class="n">y2s</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="thread-pool">
<h3><span class="section-number">1.5.5. </span>Thread Pool<a class="headerlink" href="#thread-pool" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">concurrent.futures</span> <span class="kn">import</span> <span class="n">ThreadPoolExecutor</span>
<span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">sleep</span>

<span class="k">def</span> <span class="nf">_counter</span><span class="p">(</span><span class="n">counter</span><span class="p">,</span> <span class="n">task_name</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Start process </span><span class="si">{}</span><span class="s2">!&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">task_name</span><span class="p">))</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">counter</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> : </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">task_name</span><span class="p">,</span> <span class="n">counter</span><span class="p">))</span>
        <span class="n">counter</span> <span class="o">-=</span> <span class="mi">1</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;End process </span><span class="si">{}</span><span class="s2">!&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">task_name</span><span class="p">))</span>
    <span class="k">return</span> <span class="s2">&quot;Completed </span><span class="si">{}</span><span class="s2">!&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">task_name</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_submit_thread</span><span class="p">():</span>
    <span class="n">executor</span> <span class="o">=</span> <span class="n">ThreadPoolExecutor</span><span class="p">(</span><span class="n">max_workers</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
    <span class="n">future</span> <span class="o">=</span> <span class="n">executor</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">_counter</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="s2">&quot;task1&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;State of future: &#39;</span><span class="p">,</span> <span class="n">future</span><span class="o">.</span><span class="n">done</span><span class="p">())</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;futre result: &#39;</span><span class="p">,</span> <span class="n">future</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;State of future: &#39;</span><span class="p">,</span> <span class="n">future</span><span class="o">.</span><span class="n">done</span><span class="p">())</span>
    
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span><span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">_submit_thread</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="so-sanh-process-pool-va-thread-pool">
<h3><span class="section-number">1.5.6. </span>so sánh process pool và thread pool<a class="headerlink" href="#so-sanh-process-pool-va-thread-pool" title="Link to this heading">#</a></h3>
<p>Chúng ta đã biết rằng khi sử dụng threads thì sẽ có lợi về I/O vì các threads có thể chia sẻ data qua lại lẫn nhau. Còn giữa các processes thì data được sử dụng hoàn toàn độc lập nên không có lợi về I/O. Tuy nhiên khi sử dụng process thì chúng ta sẽ được allocate về CPU, Memomory,… nên lời khuyên là nếu task của bạn gặp phải giới hạn về I/O bound thì nên sử dụng thread pool và giới hạn về CPUs bound thì nên sử dụng process pool.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CPU</span> <span class="pre">Bound</span></code> là những chương trình bị giới hạn chủ yếu bởi tốc độ của CPU: việc tính toán small set of number,…–&gt; <code class="docutils literal notranslate"><span class="pre">Nên</span> <span class="pre">dùng</span> <span class="pre">CPU</span> <span class="pre">pool</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">I/O</span> <span class="pre">Bound</span></code> means the rate at which a process progresses is limited by the speed of the I/O subsystem. A task that processes data from disk, for example, counting the number of lines in a file is likely to be I/O bound. –&gt; <code class="docutils literal notranslate"><span class="pre">Nên</span> <span class="pre">dùng</span> <span class="pre">thread</span> <span class="pre">pool</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Memory</span> <span class="pre">bound</span></code> means the rate at which a process progresses is limited by the amount memory available and the speed of that memory access. A task that processes large amounts of in memory data, for example : nhân matrix lớn</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Cache</span> <span class="pre">bound</span></code> means the rate at which a process progress is limited by the amount and speed of the cache available. A task that simply processes more data than fits in the cache will be cache bound.</p></li>
</ul>
<ul class="simple">
<li><p>Nên dùng <code class="docutils literal notranslate"><span class="pre">process</span> <span class="pre">pool</span></code> khi tính toán</p></li>
<li><p>Nên dùng <code class="docutils literal notranslate"><span class="pre">thread</span> <span class="pre">pool</span></code> khi đọc ghi</p></li>
</ul>
</section>
<section id="queue">
<h3><span class="section-number">1.5.7. </span>Queue<a class="headerlink" href="#queue" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>Khi chạy một <code class="docutils literal notranslate"><span class="pre">process</span></code> trên <code class="docutils literal notranslate"><span class="pre">multiple-threads</span></code>, queue thường được sử dụng để làm nơi lưu trữ dữ liệu chung giữa các <code class="docutils literal notranslate"><span class="pre">threads</span></code> với nhau.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Queue</span></code> tuong tự như <code class="docutils literal notranslate"><span class="pre">list</span></code> nhưng có tốc độ truy xuất nhanh hơn, phù hợp với dữ liệu có lượng phần tử lớn
-<code class="docutils literal notranslate"><span class="pre">FIFO</span></code>: phần tử <code class="docutils literal notranslate"><span class="pre">put</span></code> đầu tiên sẽ <code class="docutils literal notranslate"><span class="pre">get</span></code> đầu tiên (First in first out)
-<code class="docutils literal notranslate"><span class="pre">LIFO</span></code>: phần tử <code class="docutils literal notranslate"><span class="pre">put</span></code> cuối cùng sẽ <code class="docutils literal notranslate"><span class="pre">get</span></code> đầu tiên (last in first out)</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">14</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">34</span><span class="p">,</span><span class="mi">24</span><span class="p">,</span><span class="mi">15</span><span class="p">,</span><span class="mi">16</span><span class="p">,</span><span class="mi">27</span><span class="p">,</span><span class="mi">38</span><span class="p">,</span><span class="mi">19</span><span class="p">]</span>

<span class="kn">import</span> <span class="nn">queue</span>
<span class="c1"># create fifo queue</span>
<span class="n">fifo_q</span> <span class="o">=</span> <span class="n">queue</span><span class="o">.</span><span class="n">Queue</span><span class="p">()</span>
<span class="n">fifo_q_sizelist</span> <span class="o">=</span> <span class="n">queue</span><span class="o">.</span><span class="n">Queue</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">))</span> <span class="c1"># set max size = len(list)</span>


<span class="c1"># put element to queue:</span>
<span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">:</span>
    <span class="n">fifo_q</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
    <span class="n">fifo_q_sizelist</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
    
<span class="c1"># return size queue</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;size queue&#39;</span><span class="p">,</span> <span class="n">fifo_q</span><span class="o">.</span><span class="n">qsize</span><span class="p">())</span>

<span class="c1"># check queue is full or đã get phần tử</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;fifo_q_sizelist queue is full: &#39;</span><span class="p">,</span> <span class="n">fifo_q_sizelist</span><span class="o">.</span><span class="n">full</span><span class="p">())</span>

<span class="c1"># check queue is empty or not</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;queue is empty: &#39;</span><span class="p">,</span> <span class="n">fifo_q</span><span class="o">.</span><span class="n">empty</span><span class="p">())</span>

<span class="c1"># get phần tử trong queue đồng thời xóa phần tử đó</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The 1st item in queue: &#39;</span><span class="p">,</span><span class="n">fifo_q</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Size or queue after get 1 item: &#39;</span><span class="p">,</span><span class="n">fifo_q</span><span class="o">.</span><span class="n">qsize</span><span class="p">())</span>

<span class="c1"># loop for queue:</span>
<span class="k">while</span> <span class="ow">not</span> <span class="n">fifo_q</span><span class="o">.</span><span class="n">empty</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;the next item is&#39;</span><span class="p">,</span><span class="n">fifo_q</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>size queue 9
fifo_q_sizelist queue is full:  True
queue is empty:  False
The 1st item in queue:  14
Size or queue after get 1 item:  8
the next item is 20
the next item is 34
the next item is 24
the next item is 15
the next item is 16
the next item is 27
the next item is 38
the next item is 19
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">lifo_q</span> <span class="o">=</span> <span class="n">queue</span><span class="o">.</span><span class="n">LifoQueue</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">concurrent.futures</span> <span class="kn">import</span> <span class="n">ThreadPoolExecutor</span>
<span class="kn">import</span> <span class="nn">queue</span>


<span class="k">def</span> <span class="nf">_sum_queue</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">work_queue</span><span class="p">):</span>
    <span class="nb">sum</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">while</span> <span class="ow">not</span> <span class="n">work_queue</span><span class="o">.</span><span class="n">empty</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Task </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> running&quot;</span><span class="p">)</span>
        <span class="n">count</span> <span class="o">=</span> <span class="n">work_queue</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="nb">sum</span> <span class="o">+=</span> <span class="n">count</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Task </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> total: </span><span class="si">{</span><span class="nb">sum</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">sum</span>

<span class="k">def</span> <span class="nf">task</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">work_queue</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">work_queue</span><span class="o">.</span><span class="n">empty</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Task </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> nothing to do&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Start ThreadPoolExecutor!&quot;</span><span class="p">)</span>
        <span class="k">with</span> <span class="n">ThreadPoolExecutor</span><span class="p">(</span><span class="n">max_workers</span> <span class="o">=</span> <span class="mi">5</span><span class="p">)</span> <span class="k">as</span> <span class="n">executor</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Submit task!&quot;</span><span class="p">)</span>  
            <span class="n">future</span> <span class="o">=</span> <span class="n">executor</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">_sum_queue</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">work_queue</span><span class="p">)</span>
            <span class="nb">sum</span> <span class="o">=</span> <span class="n">future</span><span class="o">.</span><span class="n">result</span><span class="p">()</span>
        <span class="k">return</span> <span class="nb">sum</span>
    
<span class="c1"># Create the queue of work</span>
<span class="n">work_queue</span> <span class="o">=</span> <span class="n">queue</span><span class="o">.</span><span class="n">Queue</span><span class="p">()</span>

<span class="c1"># Put some work in the queue</span>
<span class="k">for</span> <span class="n">work</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">15</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">]:</span>
    <span class="n">work_queue</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">work</span><span class="p">)</span>

<span class="c1"># Create some synchronous tasks</span>
<span class="n">tasks</span> <span class="o">=</span> <span class="p">[(</span><span class="s2">&quot;one&quot;</span><span class="p">,</span> <span class="n">work_queue</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;two&quot;</span><span class="p">,</span> <span class="n">work_queue</span><span class="p">)]</span>

<span class="c1"># Run the tasks</span>
<span class="k">for</span> <span class="n">n</span><span class="p">,</span> <span class="n">q</span> <span class="ow">in</span> <span class="n">tasks</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">task</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">q</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Start ThreadPoolExecutor!
Submit task!
Task one running
Task one running
Task one running
Task one running
Task one total: 32
32
Task two nothing to do
None
</pre></div>
</div>
</div>
</div>
<p>Trong ví dụ trên giải sử chúng ta có hai threads hoạt động một cách synchronous là one và two. Hai threads này sử dụng chung một nguồn dữ liệu là work_queue. Khi thread one chạy xong thì toàn bộ các phần tử của queue đã được trích xuất xong nên ở thread two chúng ta không có gì để chạy tiếp.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">concurrent.futures</span>

<span class="k">def</span> <span class="nf">get_wiki_page_existence</span><span class="p">(</span><span class="n">wiki_page_url</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">wiki_page_url</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>

    <span class="n">page_status</span> <span class="o">=</span> <span class="s2">&quot;unknown&quot;</span>
    <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
        <span class="n">page_status</span> <span class="o">=</span> <span class="s2">&quot;exists&quot;</span>
    <span class="k">elif</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">404</span><span class="p">:</span>
        <span class="n">page_status</span> <span class="o">=</span> <span class="s2">&quot;does not exist&quot;</span>

    <span class="k">return</span> <span class="n">wiki_page_url</span> <span class="o">+</span> <span class="s2">&quot; - &quot;</span> <span class="o">+</span> <span class="n">page_status</span>

<span class="k">def</span> <span class="nf">func_with_multithread</span><span class="p">():</span>
	<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Running with multi-threads:&quot;</span><span class="p">)</span>
	<span class="n">threaded_start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
	<span class="n">wiki_page_urls</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;https://en.wikipedia.org/wiki/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">25</span><span class="p">)]</span>
	<span class="k">with</span> <span class="n">concurrent</span><span class="o">.</span><span class="n">futures</span><span class="o">.</span><span class="n">ThreadPoolExecutor</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="k">as</span> <span class="n">executor</span><span class="p">:</span>
		<span class="n">futures</span> <span class="o">=</span> <span class="p">[]</span>
		<span class="k">for</span> <span class="n">url</span> <span class="ow">in</span> <span class="n">wiki_page_urls</span><span class="p">:</span>
			<span class="n">futures</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
				<span class="n">executor</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span>
					<span class="n">get_wiki_page_existence</span><span class="p">,</span> <span class="n">wiki_page_url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">10</span>
				<span class="p">)</span>
			<span class="p">)</span>
		<span class="k">for</span> <span class="n">future</span> <span class="ow">in</span> <span class="n">concurrent</span><span class="o">.</span><span class="n">futures</span><span class="o">.</span><span class="n">as_completed</span><span class="p">(</span><span class="n">futures</span><span class="p">):</span>
			<span class="k">try</span><span class="p">:</span>
				<span class="nb">print</span><span class="p">(</span><span class="n">future</span><span class="o">.</span><span class="n">result</span><span class="p">(),</span><span class="n">end</span><span class="o">=</span> <span class="s2">&quot;</span><span class="se">\r</span><span class="s2">&quot;</span><span class="p">)</span>
			<span class="k">except</span> <span class="n">requests</span><span class="o">.</span><span class="n">ConnectTimeout</span><span class="p">:</span>
				<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ConnectTimeout.&quot;</span><span class="p">)</span>
	<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Threaded time:&quot;</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">threaded_start</span><span class="p">)</span>
				
<span class="k">def</span> <span class="nf">func_without_multithread</span><span class="p">():</span>
	<span class="n">wiki_page_urls</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;https://en.wikipedia.org/wiki/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">25</span><span class="p">)]</span>
	<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Running without threads:&quot;</span><span class="p">)</span>
	<span class="n">without_threads_start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
	<span class="k">for</span> <span class="n">url</span> <span class="ow">in</span> <span class="n">wiki_page_urls</span><span class="p">:</span>
		<span class="nb">print</span><span class="p">(</span><span class="n">get_wiki_page_existence</span><span class="p">(</span><span class="n">wiki_page_url</span><span class="o">=</span><span class="n">url</span><span class="p">),</span><span class="n">end</span><span class="o">=</span> <span class="s2">&quot;</span><span class="se">\r</span><span class="s2">&quot;</span><span class="p">)</span>
	<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Without threads time:&quot;</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">without_threads_start</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
	<span class="n">func_with_multithread</span><span class="p">()</span>
	<span class="n">func_without_multithread</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Running with multi-threads:
https://en.wikipedia.org/wiki/24 - exists
Threaded time: 3.638731002807617
Running without threads:
https://en.wikipedia.org/wiki/24 - exists
Without threads time: 6.373312711715698
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span> 
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">pandas_read_xml</span> <span class="k">as</span> <span class="nn">pdx</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">tqdm</span> <span class="kn">import</span> <span class="n">tqdm</span>
<span class="kn">from</span> <span class="nn">json</span> <span class="kn">import</span> <span class="n">loads</span><span class="p">,</span> <span class="n">dumps</span>
<span class="kn">import</span> <span class="nn">concurrent.futures</span> <span class="k">as</span> <span class="nn">cf</span>
<span class="kn">import</span> <span class="nn">queue</span>
<span class="kn">from</span> <span class="nn">multiprocessing</span> <span class="kn">import</span> <span class="n">Process</span>

<span class="k">def</span> <span class="nf">write_log</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span><span class="n">output_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">(),</span><span class="s1">&#39;log.txt&#39;</span><span class="p">)):</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">output_path</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">myfile</span><span class="p">:</span>
        <span class="n">myfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">+</span><span class="s2">&quot;Loi doc file: &quot;</span> <span class="o">+</span> <span class="n">filename</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">operation</span><span class="p">(</span><span class="n">list_files</span><span class="p">,</span><span class="n">output_folder</span><span class="p">):</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
    <span class="n">keys</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;maTKhai&#39;</span><span class="p">,</span> <span class="s1">&#39;pbanTKhaiXML&#39;</span><span class="p">,</span> <span class="s1">&#39;loaiTKhai&#39;</span><span class="p">]</span>
    <span class="n">output_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">output_folder</span><span class="p">,</span><span class="s1">&#39;doc.csv&#39;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">tqdm</span><span class="p">(</span><span class="n">list_files</span><span class="p">):</span>
        
        <span class="k">try</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">loads</span><span class="p">(</span><span class="n">dumps</span><span class="p">(</span><span class="n">pdx</span><span class="o">.</span><span class="n">read_xml</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf8&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()))[</span>
                <span class="s1">&#39;HSoThueDTu&#39;</span><span class="p">][</span><span class="s1">&#39;0&#39;</span><span class="p">][</span><span class="s1">&#39;HSoKhaiThue&#39;</span><span class="p">]</span>
            <span class="n">res</span> <span class="o">=</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;TTinChung&#39;</span><span class="p">][</span><span class="s1">&#39;TTinTKhaiThue&#39;</span><span class="p">]</span>
                    <span class="p">[</span><span class="s1">&#39;TKhaiThue&#39;</span><span class="p">][</span><span class="n">key</span><span class="p">]</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">}</span>
            <span class="n">list_pluc</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;PLuc&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
            <span class="n">list_pluc</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
            <span class="n">res</span><span class="p">[</span><span class="s1">&#39;PLUC&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">list_pluc</span><span class="p">)</span>
            <span class="n">res</span><span class="p">[</span><span class="s1">&#39;filename&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">path</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">res</span><span class="p">[</span><span class="s1">&#39;MST&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;TTinChung&#39;</span><span class="p">][</span><span class="s1">&#39;TTinTKhaiThue&#39;</span><span class="p">][</span><span class="s1">&#39;NNT&#39;</span><span class="p">][</span><span class="s1">&#39;mst&#39;</span><span class="p">]</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">res</span><span class="p">[</span><span class="s2">&quot;MST&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>

            <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>

            <span class="c1"># df.to_csv(output_path,sep=&quot;|&quot;, mode=&#39;a&#39;, header=not os.path.exists(output_path))</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">write_log</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

    <span class="n">df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">output_path</span><span class="p">,</span><span class="n">sep</span><span class="o">=</span><span class="s2">&quot;|&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">output_path</span><span class="p">))</span>


<span class="k">def</span> <span class="nf">without_thread</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span><span class="n">output_folder</span><span class="p">):</span>
    <span class="n">files</span> <span class="o">=</span>   <span class="p">[</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span><span class="n">i</span><span class="p">)</span>  <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">folder</span><span class="p">)]</span>
    <span class="n">operation</span><span class="p">(</span><span class="n">files</span><span class="p">,</span><span class="n">output_folder</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">getlink</span><span class="p">(</span><span class="n">folder</span><span class="p">):</span>
    <span class="n">workqueue</span> <span class="o">=</span> <span class="n">queue</span><span class="o">.</span><span class="n">Queue</span><span class="p">()</span>
    <span class="n">workqueue</span><span class="o">.</span><span class="n">queue</span> <span class="o">=</span> <span class="n">queue</span><span class="o">.</span><span class="n">deque</span><span class="p">([</span>
        <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">folder</span><span class="p">)])</span>
    <span class="k">return</span> <span class="n">workqueue</span>


<span class="k">def</span> <span class="nf">multiprocessing_run</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span><span class="n">numBot</span><span class="p">):</span>

    <span class="n">work_queue</span> <span class="o">=</span> <span class="p">[</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">folder</span><span class="p">)]</span>
    <span class="n">mofile</span> <span class="o">=</span> <span class="p">[[]]</span><span class="o">*</span><span class="n">numBot</span>
    <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">work_queue</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span> <span class="p">:</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">numBot</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">work_queue</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
                <span class="n">mofile</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">mofile</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="n">work_queue</span><span class="o">.</span><span class="n">pop</span><span class="p">()]</span>

    <span class="c1"># return mofile</span>
    <span class="n">jobs</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">mofile</span><span class="p">:</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">Process</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">operation</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">([</span><span class="n">file</span><span class="p">]))</span>
        <span class="n">jobs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="n">p</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">proc</span> <span class="ow">in</span> <span class="n">jobs</span><span class="p">:</span>
        <span class="n">proc</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>



<span class="k">def</span> <span class="nf">_submit_thread</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span><span class="n">num_cpus</span><span class="p">):</span>

    <span class="n">work_queue</span> <span class="o">=</span> <span class="p">[</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">folder</span><span class="p">)]</span>
    <span class="n">mofile</span> <span class="o">=</span> <span class="p">[[]]</span><span class="o">*</span><span class="n">num_cpus</span>
    <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">work_queue</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span> <span class="p">:</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_cpus</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">work_queue</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
                <span class="n">mofile</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">mofile</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="n">work_queue</span><span class="o">.</span><span class="n">pop</span><span class="p">()]</span>
    <span class="n">output_folder</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;D:\DATA SUPERLAKE\0. RAW DATA\TAX\TAX 2021\tax_code&#39;</span>
    <span class="k">with</span> <span class="n">cf</span><span class="o">.</span><span class="n">ProcessPoolExecutor</span><span class="p">(</span><span class="n">max_workers</span><span class="o">=</span><span class="n">num_cpus</span><span class="p">)</span> <span class="k">as</span> <span class="n">executor</span><span class="p">:</span>
        <span class="c1"># futures = pd.DataFrame()</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">mofile</span><span class="p">:</span>
            <span class="n">executor</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span> <span class="n">operation</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span><span class="n">output_folder</span><span class="p">)</span>
        <span class="c1"># for future in cf.as_completed(futures):</span>
        <span class="c1">#     print(future.result(),end=&#39;\r&#39;)#.to_csv(output_path,sep=&quot;|&quot;, mode=&#39;a&#39;, header=not os.path.exists(output_path))</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">tstart</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
    <span class="n">num_cpus</span> <span class="o">=</span> <span class="mi">10</span>
    <span class="n">folder</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;D:\DATA SUPERLAKE\0. RAW DATA\TAX\TAX 2021\tax_code\Phan tich 27052022\sample2 - Copy&#39;</span>
    <span class="c1"># without_thread(folder,output_path)</span>
    <span class="c1"># multiprocessing_run(folder,num_cpus)</span>
    <span class="n">_submit_thread</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span><span class="n">num_cpus</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Time for running is </span><span class="si">%.2f</span><span class="s2"> seconds&quot;</span> <span class="o">%</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span><span class="o">-</span><span class="n">tstart</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">sqlite3</span> <span class="kn">import</span> <span class="n">Time</span> 
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">pandas_read_xml</span> <span class="k">as</span> <span class="nn">pdx</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">tqdm</span> <span class="kn">import</span> <span class="n">tqdm</span>
<span class="kn">from</span> <span class="nn">json</span> <span class="kn">import</span> <span class="n">loads</span><span class="p">,</span> <span class="n">dumps</span>
<span class="kn">import</span> <span class="nn">concurrent.futures</span> <span class="k">as</span> <span class="nn">cf</span>
<span class="kn">import</span> <span class="nn">queue</span>
<span class="kn">from</span> <span class="nn">multiprocessing</span> <span class="kn">import</span> <span class="n">Process</span>

<span class="k">def</span> <span class="nf">write_log</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span><span class="n">output_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">(),</span><span class="s1">&#39;log.txt&#39;</span><span class="p">)):</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">output_path</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">myfile</span><span class="p">:</span>
        <span class="n">myfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">+</span><span class="s2">&quot;Loi doc file: &quot;</span> <span class="o">+</span> <span class="n">filename</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">operation</span><span class="p">(</span><span class="n">list_files</span><span class="p">,</span><span class="n">output_folder</span><span class="p">):</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
    <span class="n">keys</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;maTKhai&#39;</span><span class="p">,</span> <span class="s1">&#39;pbanTKhaiXML&#39;</span><span class="p">,</span> <span class="s1">&#39;loaiTKhai&#39;</span><span class="p">]</span>
    <span class="n">output_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">output_folder</span><span class="p">,</span><span class="s1">&#39;doc.csv&#39;</span><span class="p">)</span>
    <span class="c1"># for path in tqdm(list_files):</span>
    <span class="c1"># for path in list_files: </span>
    <span class="n">path</span> <span class="o">=</span> <span class="n">list_files</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">loads</span><span class="p">(</span><span class="n">dumps</span><span class="p">(</span><span class="n">pdx</span><span class="o">.</span><span class="n">read_xml</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf8&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()))[</span>
            <span class="s1">&#39;HSoThueDTu&#39;</span><span class="p">][</span><span class="s1">&#39;0&#39;</span><span class="p">][</span><span class="s1">&#39;HSoKhaiThue&#39;</span><span class="p">]</span>
        <span class="n">res</span> <span class="o">=</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;TTinChung&#39;</span><span class="p">][</span><span class="s1">&#39;TTinTKhaiThue&#39;</span><span class="p">]</span>
                <span class="p">[</span><span class="s1">&#39;TKhaiThue&#39;</span><span class="p">][</span><span class="n">key</span><span class="p">]</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">}</span>
        <span class="n">list_pluc</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;PLuc&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="n">list_pluc</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">res</span><span class="p">[</span><span class="s1">&#39;PLUC&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">list_pluc</span><span class="p">)</span>
        <span class="n">res</span><span class="p">[</span><span class="s1">&#39;filename&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">path</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">res</span><span class="p">[</span><span class="s1">&#39;MST&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;TTinChung&#39;</span><span class="p">][</span><span class="s1">&#39;TTinTKhaiThue&#39;</span><span class="p">][</span><span class="s1">&#39;NNT&#39;</span><span class="p">][</span><span class="s1">&#39;mst&#39;</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">res</span><span class="p">[</span><span class="s2">&quot;MST&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>

        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>

        <span class="c1"># df.to_csv(output_path,sep=&quot;|&quot;, mode=&#39;a&#39;, header=not os.path.exists(output_path))</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="n">write_log</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

    <span class="n">df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">output_path</span><span class="p">,</span><span class="n">sep</span><span class="o">=</span><span class="s2">&quot;|&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">output_path</span><span class="p">))</span>


<span class="k">def</span> <span class="nf">without_thread</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span><span class="n">output_folder</span><span class="p">):</span>
    <span class="n">files</span> <span class="o">=</span>   <span class="p">[</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span><span class="n">i</span><span class="p">)</span>  <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">folder</span><span class="p">)]</span>
    <span class="n">operation</span><span class="p">(</span><span class="n">files</span><span class="p">,</span><span class="n">output_folder</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">getlink</span><span class="p">(</span><span class="n">folder</span><span class="p">):</span>
    <span class="n">workqueue</span> <span class="o">=</span> <span class="n">queue</span><span class="o">.</span><span class="n">Queue</span><span class="p">()</span>
    <span class="n">workqueue</span><span class="o">.</span><span class="n">queue</span> <span class="o">=</span> <span class="n">queue</span><span class="o">.</span><span class="n">deque</span><span class="p">([</span>
        <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">folder</span><span class="p">)])</span>
    <span class="k">return</span> <span class="n">workqueue</span>


<span class="k">def</span> <span class="nf">multiprocessing_run</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span><span class="n">numBot</span><span class="p">):</span>

    <span class="n">work_queue</span> <span class="o">=</span> <span class="p">[</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">folder</span><span class="p">)]</span>
    <span class="n">mofile</span> <span class="o">=</span> <span class="p">[[]]</span><span class="o">*</span><span class="n">numBot</span>
    <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">work_queue</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span> <span class="p">:</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">numBot</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">work_queue</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
                <span class="n">mofile</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">mofile</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="n">work_queue</span><span class="o">.</span><span class="n">pop</span><span class="p">()]</span>

    <span class="c1"># return mofile</span>
    <span class="n">jobs</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">mofile</span><span class="p">:</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">Process</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">operation</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">([</span><span class="n">file</span><span class="p">]))</span>
        <span class="n">jobs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="n">p</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">proc</span> <span class="ow">in</span> <span class="n">jobs</span><span class="p">:</span>
        <span class="n">proc</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>



<span class="k">def</span> <span class="nf">_submit_thread</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span><span class="n">num_cpus</span><span class="p">):</span>

    <span class="c1"># work_queue = [os.path.join(folder,i) for i in os.listdir(folder)]</span>
    <span class="c1"># mofile = [[]]*num_cpus</span>
    <span class="c1"># while len(work_queue)&gt;0 :</span>
    <span class="c1">#     for i in range(num_cpus):</span>
    <span class="c1">#         if len(work_queue)&gt;0:</span>
    <span class="c1">#             mofile[i] = mofile[i] + [work_queue.pop()]</span>

    <span class="n">work_queue</span> <span class="o">=</span> <span class="n">getlink</span><span class="p">(</span><span class="n">folder</span><span class="p">)</span>
    <span class="n">output_folder</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;D:\DATA SUPERLAKE\0. RAW DATA\TAX\TAX 2021\tax_code&#39;</span>
    <span class="k">with</span> <span class="n">cf</span><span class="o">.</span><span class="n">ProcessPoolExecutor</span><span class="p">(</span><span class="n">max_workers</span><span class="o">=</span><span class="n">num_cpus</span><span class="p">)</span> <span class="k">as</span> <span class="n">executor</span><span class="p">:</span>
        <span class="c1"># futures = pd.DataFrame()</span>
        <span class="c1"># pbar = tqdm(total=work_queue.qsize())</span>
        <span class="n">size</span> <span class="o">=</span> <span class="n">work_queue</span><span class="o">.</span><span class="n">qsize</span><span class="p">()</span>
        <span class="k">def</span> <span class="nf">generator</span><span class="p">():</span>
            <span class="k">while</span> <span class="ow">not</span> <span class="n">work_queue</span><span class="o">.</span><span class="n">empty</span><span class="p">():</span>
            <span class="c1"># for i in mofile:</span>
                <span class="k">yield</span> <span class="n">work_queue</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">tqdm</span><span class="p">(</span><span class="n">generator</span><span class="p">(),</span><span class="n">total</span> <span class="o">=</span> <span class="n">size</span><span class="p">):</span>
            <span class="n">executor</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">operation</span><span class="p">,</span> <span class="n">i</span> <span class="p">,</span><span class="n">output_folder</span><span class="p">)</span>
            <span class="c1"># pbar.update()</span>
        <span class="c1"># pbar.close()</span>
        <span class="c1"># for future in cf.as_completed(futures):</span>
        <span class="c1">#     print(future.result(),end=&#39;\r&#39;)#.to_csv(output_path,sep=&quot;|&quot;, mode=&#39;a&#39;, header=not os.path.exists(output_path))</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">tstart</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
    <span class="n">num_cpus</span> <span class="o">=</span> <span class="mi">10</span>
    <span class="n">folder</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;D:\DATA SUPERLAKE\0. RAW DATA\TAX\TAX 2021\tax_code\Phan tich 27052022\sample2 - Copy&#39;</span>
    <span class="c1"># without_thread(folder,output_path)</span>
    <span class="c1"># multiprocessing_run(folder,num_cpus)</span>
    <span class="n">_submit_thread</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span><span class="n">num_cpus</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Time for running is </span><span class="si">%.2f</span><span class="s2"> seconds&quot;</span> <span class="o">%</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span><span class="o">-</span><span class="n">tstart</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="decorators">
<h2><span class="section-number">1.6. </span>Decorators<a class="headerlink" href="#decorators" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>Mở rộng chức năng của hàm khác</p></li>
<li><p>Nhận hàm dưới decorator làm hàm tham số, mở rộng chức năm của hàm tham số mà không cần chỉnh sửa hàm tham số</p></li>
<li><p>áp dụng cho ghi log, khởi tạo tài nguyên trước khi chạy function, hoặc dọn dẹp sau khi chạy, đo time,…</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">wraps</span>

<span class="k">def</span> <span class="nf">debug</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="nd">@wraps</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">out</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">out</span>

<span class="nd">@debug</span>
<span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>
</pre></div>
</div>
</div>
</div>
<section id="co-ban-ham-decorator">
<h3><span class="section-number">1.6.1. </span>Cơ bản hàm decorator<a class="headerlink" href="#co-ban-ham-decorator" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">display_decorator</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    
    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="nb">str</span><span class="p">):</span> <span class="c1"># closure</span>
        <span class="c1"># logic trước khi chạy hàm func</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Log: The function </span><span class="si">{</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s1"> is executing ...&#39;</span><span class="p">)</span>
        <span class="n">func</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
        <span class="c1"># logic sau khi chạy hàm func</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Log: Execution completed.</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">wrapper</span>

<span class="c1">#bản chất</span>
<span class="k">def</span> <span class="nf">display</span><span class="p">(</span><span class="nb">str</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>

<span class="n">display</span> <span class="o">=</span> <span class="n">display_decorator</span><span class="p">(</span><span class="n">display</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="s1">&#39;Hello world&#39;</span><span class="p">)</span>

<span class="c1"># tương đương</span>
<span class="c1"># truyền hàm say_hello làm tham số cho hàm display_decorator</span>
<span class="nd">@display_decorator</span>
<span class="k">def</span> <span class="nf">say_hello</span><span class="p">(</span><span class="nb">str</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>

<span class="n">say_hello</span><span class="p">(</span><span class="s1">&#39;Hello, Donald&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">makebold</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
    <span class="k">return</span> <span class="k">lambda</span><span class="p">:</span> <span class="s2">&quot;&lt;b&gt;&quot;</span> <span class="o">+</span> <span class="n">f</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;&lt;/b&gt;&quot;</span>

<span class="k">def</span> <span class="nf">makeitalic</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
    <span class="k">return</span> <span class="k">lambda</span><span class="p">:</span> <span class="s2">&quot;&lt;i&gt;&quot;</span> <span class="o">+</span> <span class="n">f</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;&lt;/i&gt;&quot;</span>

<span class="nd">@makebold</span>
<span class="nd">@makeitalic</span>
<span class="k">def</span> <span class="nf">say</span><span class="p">():</span>
    <span class="k">return</span> <span class="s2">&quot;Hello&quot;</span>

<span class="nb">print</span><span class="p">(</span><span class="n">say</span><span class="p">())</span> <span class="c1">#// kết quả là &lt;b&gt;&lt;i&gt;Hello&lt;/i&gt;&lt;/b&gt;</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="lop-decorator">
<h3><span class="section-number">1.6.2. </span>Lớp decorator<a class="headerlink" href="#lop-decorator" title="Link to this heading">#</a></h3>
<p>Xử lý cho hàm deco phức tạp</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">decoclass</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">f</span> <span class="o">=</span> <span class="n">f</span>
    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="c1"># logic trước khi gọi hàm f</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;decorator initialised&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;decorator terminated&#39;</span><span class="p">)</span>
        <span class="c1"># logic sau khi gọi hàm f</span>

<span class="nd">@decoclass</span>
<span class="k">def</span> <span class="nf">hello</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="n">name2</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Hello, </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s1">. Welcome to </span><span class="si">{</span><span class="n">name2</span><span class="si">}</span><span class="s1"> heaven!&#39;</span><span class="p">)</span>

<span class="n">hello</span><span class="p">(</span><span class="s1">&#39;XXX&#39;</span><span class="p">,</span><span class="s1">&#39;YYY&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Inside decorator
Inside inner function
I like cafedevn
Inside actual function
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># tạo hàm decorator tính time</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">sleep</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>return  0
return  1
return  2
runtime =  0:00:03.016835
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># tạo hàm decorator tính time</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">sleep</span>

<span class="k">class</span> <span class="nc">decoclass</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">f</span> <span class="o">=</span> <span class="n">f</span>
    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="c1"># logic trước khi gọi hàm f</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;decorator initialised&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;decorator terminated&#39;</span><span class="p">)</span>
        <span class="c1"># logic sau khi gọi hàm f</span>
        
    <span class="k">def</span> <span class="nf">runtime</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">*</span><span class="n">arg</span><span class="p">):</span>
        <span class="n">start</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
        <span class="n">decoclass</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;runtime = &quot;</span><span class="p">,</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">-</span><span class="n">start</span><span class="p">)</span>
        
<span class="nd">@decoclass</span><span class="o">.</span><span class="n">runtime</span>
<span class="k">def</span> <span class="nf">print_second1</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;return &#39;</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
        <span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        
<span class="n">print_second1</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>return  0
return  1
return  2
runtime hello =  0:00:03.025241
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">math</span>
<span class="kn">import</span> <span class="nn">timeit</span>

<span class="c1"># class runtime(object):</span>
<span class="c1">#     def __init__(self, f):</span>
<span class="c1">#         self.f = f</span>
<span class="c1">#     def __call__(self, *args, **kwargs):</span>
<span class="c1">#         start = timeit.default_timer()</span>
<span class="c1">#         res = self.f(*args, **kwargs)</span>
<span class="c1">#         stop = timeit.default_timer()</span>
<span class="c1">#         print(stop - start, &quot; (seconds)&quot;)</span>
<span class="c1">#         return res</span>

<span class="k">def</span> <span class="nf">runtime</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">func_wrapper</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
        <span class="n">start</span> <span class="o">=</span> <span class="n">timeit</span><span class="o">.</span><span class="n">default_timer</span><span class="p">()</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="n">stop</span> <span class="o">=</span> <span class="n">timeit</span><span class="o">.</span><span class="n">default_timer</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">stop</span> <span class="o">-</span> <span class="n">start</span><span class="p">,</span> <span class="s2">&quot;(seconds)&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">res</span>
    <span class="k">return</span> <span class="n">func_wrapper</span>

<span class="k">def</span> <span class="nf">is_prime</span><span class="p">(</span><span class="n">number</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">number</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">if</span> <span class="n">number</span> <span class="o">&lt;=</span> <span class="mi">1</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">number</span> <span class="o">%</span> <span class="mi">2</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="n">max_range</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">number</span><span class="p">))</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="k">for</span> <span class="n">div</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">max_range</span><span class="p">,</span> <span class="mi">2</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">number</span> <span class="o">%</span> <span class="n">div</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
    <span class="k">return</span> <span class="kc">True</span>

    
<span class="nd">@runtime</span>
<span class="k">def</span> <span class="nf">run_program</span><span class="p">(</span><span class="n">max_number</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">number</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">max_number</span><span class="p">):</span>
        <span class="n">is_prime</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>

<span class="n">run_program</span><span class="p">(</span><span class="mi">1000000</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>I like Geeksforgeeks
Summation of values - 27
Geeks
for
Geeks
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">decorator</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span> 
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Inside decorator&quot;</span><span class="p">)</span> 
      
    <span class="k">def</span> <span class="nf">inner</span><span class="p">(</span><span class="n">func</span><span class="p">):</span> 
          
        <span class="c1"># code functionality here </span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Inside inner function&quot;</span><span class="p">)</span> 
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;I like&quot;</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;like&#39;</span><span class="p">])</span>  
          
        <span class="n">func</span><span class="p">()</span> 
          
    <span class="c1"># reurning inner function     </span>
    <span class="k">return</span> <span class="n">inner</span> 
  
<span class="nd">@decorator</span><span class="p">(</span><span class="n">like</span> <span class="o">=</span> <span class="s2">&quot;cafedevn&quot;</span><span class="p">)</span> 
<span class="k">def</span> <span class="nf">my_func</span><span class="p">():</span> 
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Inside actual function&quot;</span><span class="p">)</span> 
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">runtime</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="n">start</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
    <span class="n">f</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;runtime = &quot;</span><span class="p">,</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">-</span><span class="n">start</span><span class="p">)</span>
    
<span class="nd">@runtime</span>
<span class="k">def</span> <span class="nf">print_second</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;return &#39;</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
        <span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        
<span class="n">print_second</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">sleep</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">import</span> <span class="nn">functools</span>

<span class="k">def</span> <span class="nf">runtime</span><span class="p">(</span><span class="n">string</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">decorator_log</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
        <span class="nd">@functools</span><span class="o">.</span><span class="n">wraps</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
        <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="n">start</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;runtime </span><span class="si">{</span><span class="n">string</span><span class="si">}</span><span class="s2"> = &quot;</span><span class="p">,</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">-</span><span class="n">start</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">result</span>
        <span class="k">return</span> <span class="n">wrapper</span>
    <span class="k">return</span> <span class="n">decorator_log</span>
    
<span class="nd">@runtime</span> <span class="p">(</span><span class="n">string</span> <span class="o">=</span> <span class="s2">&quot;hello&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">print_second</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;return &#39;</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
        <span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        
<span class="n">print_second</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Khong
Dat
Khong-Dat@team.com
Khong Dat
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Python code to illustrate</span>
<span class="c1"># Decorators with parameters in Python</span>

<span class="k">def</span> <span class="nf">decorator_func</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>

	<span class="k">def</span> <span class="nf">Inner</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>

		<span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
			<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;I like Geeksforgeeks&quot;</span><span class="p">)</span>
			<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Summation of values - </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="p">)</span> <span class="p">)</span>

			<span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
			
		<span class="k">return</span> <span class="n">wrapper</span>
	<span class="k">return</span> <span class="n">Inner</span>


<span class="c1"># Not using decorator</span>
<span class="k">def</span> <span class="nf">my_fun</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
	<span class="k">for</span> <span class="n">ele</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
		<span class="nb">print</span><span class="p">(</span><span class="n">ele</span><span class="p">)</span>

<span class="c1"># another way of using decorators</span>
<span class="n">decorator_func</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">15</span><span class="p">)(</span><span class="n">my_fun</span><span class="p">)(</span><span class="s1">&#39;Geeks&#39;</span><span class="p">,</span> <span class="s1">&#39;for&#39;</span><span class="p">,</span> <span class="s1">&#39;Geeks&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>An
Viet
Khong-Dat@team.com
An Viet
</pre></div>
</div>
</div>
</div>
</section>
<section id="special-decorator">
<h3><span class="section-number">1.6.3. </span>Special decorator<a class="headerlink" href="#special-decorator" title="Link to this heading">#</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>    <span class="nd">@property</span> <span class="p">:</span> <span class="n">biến</span> <span class="n">method</span> <span class="n">thành</span> <span class="n">attribute</span>
    <span class="o">@</span><span class="s2">&quot;method&quot;</span><span class="o">.</span><span class="n">setter</span> <span class="p">:</span> <span class="n">gán</span> <span class="n">value</span> <span class="n">cho</span> <span class="n">method</span><span class="p">(</span><span class="n">có</span> <span class="nb">property</span><span class="p">),</span> <span class="n">có</span> <span class="n">thể</span> <span class="n">sửa</span> <span class="n">các</span> <span class="n">attribute</span> <span class="n">ban</span> <span class="n">đầu</span> <span class="n">có</span> <span class="n">liên</span> <span class="n">quan</span>
    <span class="o">@</span><span class="s2">&quot;method&quot;</span><span class="o">.</span><span class="n">deleter</span> <span class="p">:</span> <span class="n">xóa</span> <span class="n">value</span> <span class="n">cho</span> <span class="n">method</span><span class="p">(</span><span class="n">có</span> <span class="nb">property</span><span class="p">),</span> <span class="n">có</span> <span class="n">thể</span> <span class="n">xóa</span> <span class="n">các</span> <span class="n">attribute</span> <span class="n">ban</span> <span class="n">đầu</span> <span class="n">có</span> <span class="n">liên</span> <span class="n">quan</span>
</pre></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Teamm</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ho</span><span class="p">,</span> <span class="n">ten</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ho</span> <span class="o">=</span> <span class="n">ho</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ten</span> <span class="o">=</span> <span class="n">ten</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">email</span> <span class="o">=</span> <span class="n">ho</span> <span class="o">+</span> <span class="s2">&quot;-&quot;</span> <span class="o">+</span> <span class="n">ten</span> <span class="o">+</span> <span class="s2">&quot;@team.com&quot;</span>

    <span class="k">def</span> <span class="nf">ho_va_ten</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>  <span class="c1"># regular method</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ho</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ten</span><span class="p">)</span>


<span class="n">ktd</span> <span class="o">=</span> <span class="n">Teamm</span><span class="p">(</span><span class="s2">&quot;Khong&quot;</span><span class="p">,</span> <span class="s2">&quot;Dat&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;Khanh&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">ktd</span><span class="o">.</span><span class="n">ho</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ktd</span><span class="o">.</span><span class="n">ten</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ktd</span><span class="o">.</span><span class="n">email</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ktd</span><span class="o">.</span><span class="n">ho_va_ten</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>None
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># thử modify attribute</span>
<span class="n">ktd</span><span class="o">.</span><span class="n">ho</span> <span class="o">=</span> <span class="s2">&quot;An&quot;</span>
<span class="n">ktd</span><span class="o">.</span><span class="n">ten</span> <span class="o">=</span> <span class="s2">&quot;Viet&quot;</span>

<span class="nb">print</span><span class="p">(</span><span class="n">ktd</span><span class="o">.</span><span class="n">ho</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ktd</span><span class="o">.</span><span class="n">ten</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ktd</span><span class="o">.</span><span class="n">email</span><span class="p">)</span>  <span class="c1"># email ko bị đổi theo</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ktd</span><span class="o">.</span><span class="n">ho_va_ten</span><span class="p">())</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Teamm</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ho</span><span class="p">,</span> <span class="n">ten</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ho</span> <span class="o">=</span> <span class="n">ho</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ten</span> <span class="o">=</span> <span class="n">ten</span>

    <span class="nd">@property</span>  <span class="c1"># bien method thanh attribute</span>
    <span class="k">def</span> <span class="nf">email</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>  <span class="c1"># regular method</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ho</span> <span class="o">+</span> <span class="s2">&quot;_&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">ten</span> <span class="o">+</span> <span class="s2">&quot;@team.com&quot;</span>

    <span class="nd">@property</span>  <span class="c1"># bien method thanh attribute</span>
    <span class="k">def</span> <span class="nf">ho_va_ten</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>  <span class="c1"># regular method</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ho</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ten</span><span class="p">)</span>

    <span class="nd">@ho_va_ten</span><span class="o">.</span><span class="n">setter</span>  <span class="c1"># method ho_va_ten có thể gán giá trị và sửa giá trị attribute ho, ten</span>
    <span class="k">def</span> <span class="nf">ho_va_ten</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ten_moi</span><span class="p">):</span>
        <span class="n">ho_moi</span><span class="p">,</span> <span class="n">ten_moi</span> <span class="o">=</span> <span class="n">ten_moi</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ho</span> <span class="o">=</span> <span class="n">ho_moi</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ten</span> <span class="o">=</span> <span class="n">ten_moi</span>

    <span class="nd">@ho_va_ten</span><span class="o">.</span><span class="n">deleter</span>  <span class="c1"># method ho_va_ten có thể gán giá trị và sửa giá trị attribute ho, ten</span>
    <span class="k">def</span> <span class="nf">ho_va_ten</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ho</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ten</span> <span class="o">=</span> <span class="kc">None</span>


<span class="n">ktd</span> <span class="o">=</span> <span class="n">Teamm</span><span class="p">(</span><span class="s2">&quot;Khong&quot;</span><span class="p">,</span> <span class="s2">&quot;Dat&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ktd</span><span class="o">.</span><span class="n">ho_va_ten</span> <span class="o">=</span> <span class="s2">&quot;An Khanh&quot;</span>
<span class="n">ktd</span><span class="o">.</span><span class="n">ten</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>93326215443944152681699238856266700490715968264381621468592963895217599993229915608941463976156518286253697920827223758251185210916864000000000000000000000000
Wall time: 0 ns
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">del</span> <span class="n">ktd</span><span class="o">.</span><span class="n">ho_va_ten</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ktd</span><span class="o">.</span><span class="n">ten</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>120
</pre></div>
</div>
</div>
</div>
</section>
<section id="decorator-memorization">
<h3><span class="section-number">1.6.4. </span>Decorator memorization<a class="headerlink" href="#decorator-memorization" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>Ghi nhớ là một kỹ thuật ghi lại các kết quả trung gian để chúng có thể được sử dụng nhằm tránh tính toán lặp lại và tăng tốc độ cho chương trình. Ghi nhớ có thể được sử dụng để tối ưu hóa các chương trình sử dụng đệ quy. Trong Python, ghi nhớ có thể được thực hiện với sự trợ giúp của Decorator</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%time</span>
<span class="c1"># Bai toan tinh giai thua</span>
<span class="c1"># Simple recursive program to find factorial</span>

<span class="k">def</span> <span class="nf">facto</span><span class="p">(</span><span class="n">num</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">num</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">num</span> <span class="o">*</span> <span class="n">facto</span><span class="p">(</span><span class="n">num</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">facto</span><span class="p">(</span><span class="mi">100</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Chương trình như trên có thể sử dụng Decorator để giải quyết như sau:</span>
<span class="c1"># Factorial program with memoization using </span>
<span class="c1"># decorators. </span>
<span class="c1"># A decorator function for function &#39;f&#39; passed </span>
<span class="c1"># as parameter </span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Có thể giải thích ví dụ trên như sau:</span>

<span class="sd">1. Một hàm có tên memoize_factoria l đã được định nghĩa. Mục đích chính của nó là lưu trữ các kết quả trung gian trong biến được gọi là bộ nhớ.</span>

<span class="sd">2. Chức năng thứ hai được gọi là facto là chức năng để tính toán giai thừa. Nó đã được chú thích bởi một decorator (hàm memoize_factorial). </span>
<span class="sd">Facto có quyền truy cập vào biến bộ nhớ. </span>

<span class="sd">3. Khi facto (5) được gọi, các phép toán đệ quy diễn ra ngoài việc lưu trữ các kết quả trung gian. </span>
<span class="sd">Mỗi khi một phép tính cần được thực hiện, nó sẽ được kiểm tra xem kết quả có sẵn trong bộ nhớ hay không . </span>
<span class="sd">Nếu có, thì nó được sử dụng, ngược lại, giá trị được tính toán và được lưu trữ trong bộ nhớ .</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="k">def</span> <span class="nf">memoize_factorial</span><span class="p">(</span><span class="n">f</span><span class="p">):</span> 
    <span class="n">memory</span> <span class="o">=</span> <span class="p">{}</span> 
    <span class="c1"># This inner function has access to memory </span>
    <span class="c1"># and &#39;f&#39; </span>
    <span class="k">def</span> <span class="nf">inner</span><span class="p">(</span><span class="n">num</span><span class="p">):</span> 
        <span class="k">if</span> <span class="n">num</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">memory</span><span class="p">:</span>  
            <span class="n">memory</span><span class="p">[</span><span class="n">num</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="p">(</span><span class="n">num</span><span class="p">)</span> 
        <span class="k">return</span> <span class="n">memory</span><span class="p">[</span><span class="n">num</span><span class="p">]</span> 
    <span class="k">return</span> <span class="n">inner</span> 

<span class="nd">@memoize_factorial</span>
<span class="k">def</span> <span class="nf">facto</span><span class="p">(</span><span class="n">num</span><span class="p">):</span> 
    <span class="k">if</span> <span class="n">num</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span> 
        <span class="k">return</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>  
        <span class="k">return</span> <span class="n">num</span> <span class="o">*</span> <span class="n">facto</span><span class="p">(</span><span class="n">num</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> 
<span class="nb">print</span><span class="p">(</span><span class="n">facto</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span> 
</pre></div>
</div>
</div>
</div>
</section>
<section id="go-loi-bang-decorator">
<h3><span class="section-number">1.6.5. </span>Gỡ lỗi bằng decorator<a class="headerlink" href="#go-loi-bang-decorator" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Bạn có thể sử dụng trình Decorator trong Python để gỡ lỗi bằng cách dùng functools.wraps() trong thư viện tiêu chuẩn của Python. </span>
<span class="c1"># Ví dụ như sau:</span>

<span class="c1"># importing the module </span>
<span class="kn">import</span> <span class="nn">functools</span> 

<span class="c1"># decorator </span>
<span class="k">def</span> <span class="nf">make_geek_happy</span><span class="p">(</span><span class="n">func</span><span class="p">):</span> 

    <span class="nd">@functools</span><span class="o">.</span><span class="n">wraps</span><span class="p">(</span><span class="n">func</span><span class="p">)</span> 
    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">():</span> 
        <span class="n">neutral_message</span> <span class="o">=</span> <span class="n">func</span><span class="p">()</span> 
        <span class="n">happy_message</span> <span class="o">=</span> <span class="n">neutral_message</span> <span class="o">+</span> <span class="s2">&quot; You are happy!&quot;</span>
        <span class="k">return</span> <span class="n">happy_message</span> 
    <span class="k">return</span> <span class="n">wrapper</span> 

<span class="k">def</span> <span class="nf">speak</span><span class="p">():</span> 
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns a neutral message&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="s2">&quot;Hi!&quot;</span>

<span class="n">positive_message</span> <span class="o">=</span> <span class="n">make_geek_happy</span><span class="p">(</span><span class="n">speak</span><span class="p">)</span> 

<span class="nb">print</span><span class="p">(</span><span class="n">positive_message</span><span class="p">())</span> <span class="c1"># Hi! You are happy!</span>

<span class="nb">print</span><span class="p">(</span><span class="n">speak</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span> 

<span class="nb">print</span><span class="p">(</span><span class="n">speak</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">)</span> 

<span class="nb">print</span><span class="p">(</span><span class="n">positive_message</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span> 

<span class="nb">print</span><span class="p">(</span><span class="n">positive_message</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="class">
<h2><span class="section-number">1.7. </span>Class<a class="headerlink" href="#class" title="Link to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Name</span><span class="p">:</span>
    <span class="n">age</span> <span class="o">=</span> <span class="mi">80</span> <span class="c1"># Class Object Attribute</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="n">a</span> <span class="c1"># Object Attribute</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_class_name</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span>
<span class="c1">### Khoi tao class</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># khoi tao class</span>
<span class="k">class</span> <span class="nc">Company</span><span class="p">:</span>
    <span class="k">pass</span>


<span class="c1"># khai bao object</span>
<span class="n">hoaphat</span> <span class="o">=</span> <span class="n">Company</span><span class="p">()</span>

<span class="c1"># add attribute</span>
<span class="n">hoaphat</span><span class="o">.</span><span class="n">ten</span> <span class="o">=</span> <span class="s2">&quot;Hoa Phat&quot;</span>
<span class="n">hoaphat</span><span class="o">.</span><span class="n">sector</span> <span class="o">=</span> <span class="s2">&quot;Xay Dung&quot;</span>
<span class="n">hoaphat</span><span class="o">.</span><span class="n">industry</span> <span class="o">=</span> <span class="s2">&quot;San xuat thep&quot;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;Cong ty Hoa Phat&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">hoaphat</span><span class="o">.</span><span class="n">ten</span>
</pre></div>
</div>
</div>
</div>
<section id="ham-constructor-initialize-method">
<h3><span class="section-number">1.7.1. </span>Hàm constructor (initialize method)<a class="headerlink" href="#ham-constructor-initialize-method" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># từ khóa self sẽ nhận giá trị chính là đối tượng đã  gọi hàm đó</span>
<span class="c1"># contructor mo dau va ket thuc bang &quot;__&quot;</span>
<span class="k">class</span> <span class="nc">Company</span><span class="p">:</span>
    <span class="n">country</span> <span class="o">=</span> <span class="s2">&quot;VietNam&quot;</span>  <span class="c1"># attribute dac trung cua ca class</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name_para</span><span class="p">,</span> <span class="n">sector_para</span><span class="p">,</span> <span class="n">industry_para</span><span class="p">):</span>  <span class="c1"># contructor</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Cong ty &quot;</span> <span class="o">+</span> <span class="n">name_para</span>  <span class="c1"># attribute dac trung cua mỗi object</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sector</span> <span class="o">=</span> <span class="n">sector_para</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">industry</span> <span class="o">=</span> <span class="n">industry_para</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;VietNam&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># truyen cac argument theo thu tu</span>
<span class="n">hoaphat</span> <span class="o">=</span> <span class="n">Company</span><span class="p">(</span><span class="s2">&quot;Hoa Phat&quot;</span><span class="p">,</span> <span class="s2">&quot;Xay Dung&quot;</span><span class="p">,</span> <span class="s2">&quot;San xuat thep&quot;</span><span class="p">)</span>

<span class="n">hoaphat</span><span class="o">.</span><span class="n">name</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">tcb</span> <span class="o">=</span> <span class="n">Company</span><span class="p">(</span><span class="s2">&quot;Techcombank&quot;</span><span class="p">,</span> <span class="s2">&quot;Tai Chinh&quot;</span><span class="p">,</span> <span class="s2">&quot;Ngan hang&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Company</span><span class="o">.</span><span class="n">country</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">tcb</span><span class="o">.</span><span class="n">country</span>  <span class="c1"># su dung chung attribute cua class</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;name&#39;: &#39;Hoa Phat&#39;,
 &#39;sector&#39;: &#39;Xay Dung&#39;,
 &#39;industry&#39;: &#39;San xuat thep&#39;,
 &#39;stt&#39;: 1}
</pre></div>
</div>
</div>
</div>
</section>
<section id="attribute">
<h3><span class="section-number">1.7.2. </span>Attribute<a class="headerlink" href="#attribute" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># ham xu dung trong class la method</span>
<span class="k">class</span> <span class="nc">Company</span><span class="p">:</span>
    <span class="c1"># Attribute dac trung cua class</span>
    <span class="n">country</span> <span class="o">=</span> <span class="s2">&quot;VietNam&quot;</span>
    <span class="n">number_of_company</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name_para</span><span class="p">,</span> <span class="n">sector_para</span><span class="p">,</span> <span class="n">industry_para</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name_para</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sector</span> <span class="o">=</span> <span class="n">sector_para</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">industry</span> <span class="o">=</span> <span class="n">industry_para</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stt</span> <span class="o">=</span> <span class="n">Company</span><span class="o">.</span><span class="n">number_of_company</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="n">Company</span><span class="o">.</span><span class="n">number_of_company</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="k">def</span> <span class="nf">thongtin</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Cong ty </span><span class="si">{}</span><span class="s2"> lam nganh </span><span class="si">{}</span><span class="s2">, linh vuc </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">industry</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sector</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">thongtinchitiet</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Cong ty </span><span class="si">{}</span><span class="s2"> lam nganh </span><span class="si">{}</span><span class="s2">, linh vuc </span><span class="si">{}</span><span class="s2">, dat nuoc </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">industry</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sector</span><span class="p">,</span> <span class="n">Company</span><span class="o">.</span><span class="n">country</span>
        <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;Cong ty Hoa Phat lam nganh San xuat thep, linh vuc Xay Dung, dat nuoc VietNam&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">hpg</span> <span class="o">=</span> <span class="n">Company</span><span class="p">(</span><span class="s2">&quot;Hoa Phat&quot;</span><span class="p">,</span> <span class="s2">&quot;Xay Dung&quot;</span><span class="p">,</span> <span class="s2">&quot;San xuat thep&quot;</span><span class="p">)</span>
<span class="n">tcb</span> <span class="o">=</span> <span class="n">Company</span><span class="p">(</span><span class="s2">&quot;Techcombank&quot;</span><span class="p">,</span> <span class="s2">&quot;Tai Chinh&quot;</span><span class="p">,</span> <span class="s2">&quot;Ngan hang&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1
VN
VietNam
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># dict attribute</span>
<span class="nb">vars</span><span class="p">(</span><span class="n">hpg</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># list attribute name , include lớp cha</span>
<span class="nb">dir</span><span class="p">(</span><span class="n">hpg</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>VietNam
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;VN&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Company</span><span class="o">.</span><span class="n">thongtinchitiet</span><span class="p">(</span><span class="n">hpg</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">hpg</span><span class="o">.</span><span class="n">stt</span><span class="p">)</span>

<span class="n">hpg</span><span class="o">.</span><span class="n">country</span> <span class="o">=</span> <span class="s2">&quot;VN&quot;</span>  <span class="c1"># sua thuoc tinh cuar object nhung khong lam thay doi thuoc tinh cua class</span>

<span class="nb">print</span><span class="p">(</span><span class="n">hpg</span><span class="o">.</span><span class="n">country</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Company</span><span class="o">.</span><span class="n">country</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Company</span><span class="o">.</span><span class="n">number_of_company</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">Company</span><span class="o">.</span><span class="n">country</span><span class="p">)</span>

<span class="n">Company</span><span class="o">.</span><span class="n">country</span> <span class="o">=</span> <span class="s2">&quot;VN&quot;</span>  <span class="c1"># sua thuoc tinh cua Class</span>
<span class="n">tcb</span><span class="o">.</span><span class="n">country</span>  <span class="c1"># thuoc tinh cua object cung bi thay doi theo class</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="method">
<h3><span class="section-number">1.7.3. </span>Method<a class="headerlink" href="#method" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>Nếu bạn dựng một phương thức cần sử dụng đối tượng đó thì dùng regular method</p></li>
<li><p>Nếu bạn cần dùng class thì dùng class method</p></li>
<li><p>Trường hợp còn lại (tức là không dùng gì) thì dùng static method</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># ham xu dung trong class la method</span>
<span class="k">class</span> <span class="nc">Company</span><span class="p">:</span>
    <span class="c1"># Attribute dac trung cua class</span>
    <span class="n">country</span> <span class="o">=</span> <span class="s2">&quot;VietNam&quot;</span>
    <span class="n">number_of_company</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name_para</span><span class="p">,</span> <span class="n">sector_para</span><span class="p">,</span> <span class="n">industry_para</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name_para</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sector</span> <span class="o">=</span> <span class="n">sector_para</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">industry</span> <span class="o">=</span> <span class="n">industry_para</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stt</span> <span class="o">=</span> <span class="n">Company</span><span class="o">.</span><span class="n">number_of_company</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="n">Company</span><span class="o">.</span><span class="n">number_of_company</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="c1"># REGULAR METHOD - hướng đến seft là đối tượng</span>
    <span class="c1"># regular method luon co it nhat 1 argument self la chinh object</span>
    <span class="k">def</span> <span class="nf">thongtin</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Cong ty </span><span class="si">{}</span><span class="s2"> lam nganh </span><span class="si">{}</span><span class="s2">, linh vuc </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">industry</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sector</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">thongtinchitiet</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Cong ty </span><span class="si">{}</span><span class="s2"> lam nganh </span><span class="si">{}</span><span class="s2">, linh vuc </span><span class="si">{}</span><span class="s2">, dat nuoc </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">industry</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sector</span><span class="p">,</span>
            <span class="n">Company</span><span class="o">.</span><span class="n">country</span><span class="p">,</span>  <span class="c1"># có thể chứa cả attribute đặc trưng của class</span>
        <span class="p">)</span>

    <span class="c1"># CLASS METHOD - hướng đến class</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">update_country</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">country_para</span><span class="p">):</span>  <span class="c1"># thay đổi attribute của class</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">country</span> <span class="o">=</span> <span class="n">country_para</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_list</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">lis</span><span class="p">):</span>  <span class="c1"># method get object thường bắt đầu bới from</span>
        <span class="n">name_para</span><span class="p">,</span> <span class="n">industry_para</span><span class="p">,</span> <span class="n">sector_para</span> <span class="o">=</span> <span class="n">lis</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">name_para</span><span class="p">,</span> <span class="n">industry_para</span><span class="p">,</span> <span class="n">sector_para</span><span class="p">)</span>

    <span class="c1"># STATIC METHOD - hàm bình thường mà không động gì đến class hay object</span>
    <span class="k">def</span> <span class="nf">get_info_class</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Đây là Class Company tạo bới KTĐ&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">hpg</span> <span class="o">=</span> <span class="n">Company</span><span class="p">(</span><span class="s2">&quot;Hoa Phat&quot;</span><span class="p">,</span> <span class="s2">&quot;Xay Dung&quot;</span><span class="p">,</span> <span class="s2">&quot;San xuat thep&quot;</span><span class="p">)</span>
<span class="n">tcb</span> <span class="o">=</span> <span class="n">Company</span><span class="p">(</span><span class="s2">&quot;Techcombank&quot;</span><span class="p">,</span> <span class="s2">&quot;Tai Chinh&quot;</span><span class="p">,</span> <span class="s2">&quot;Ngan hang&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>VietNam
VNam
VNam_2
</pre></div>
</div>
</div>
</div>
<section id="regular-method">
<h4><span class="section-number">1.7.3.1. </span>regular method<a class="headerlink" href="#regular-method" title="Link to this heading">#</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">hpg</span><span class="o">.</span><span class="n">thongtin</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="class-method">
<h4><span class="section-number">1.7.3.2. </span>Class method<a class="headerlink" href="#class-method" title="Link to this heading">#</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Dùng để update attribute của class</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Company</span><span class="o">.</span><span class="n">country</span><span class="p">)</span>

<span class="c1"># update bang class</span>
<span class="n">Company</span><span class="o">.</span><span class="n">update_country</span><span class="p">(</span><span class="s2">&quot;VNam&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Company</span><span class="o">.</span><span class="n">country</span><span class="p">)</span>

<span class="c1"># update bang object</span>
<span class="n">hpg</span><span class="o">.</span><span class="n">update_country</span><span class="p">(</span><span class="s2">&quot;VNam_2&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Company</span><span class="o">.</span><span class="n">country</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># nhập object cho class</span>
<span class="n">input_obj</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;FPTS&quot;</span><span class="p">,</span> <span class="s2">&quot;Ban le&quot;</span><span class="p">,</span> <span class="s2">&quot;Cong nghe&quot;</span><span class="p">]</span>
<span class="n">fpts</span> <span class="o">=</span> <span class="n">Company</span><span class="o">.</span><span class="n">from_list</span><span class="p">(</span><span class="n">input_obj</span><span class="p">)</span>
<span class="n">fpts</span><span class="o">.</span><span class="n">thongtin</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Đây là Class Company tạo bới KTĐ
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fpts</span><span class="o">.</span><span class="vm">__dict__</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="static-method">
<h4><span class="section-number">1.7.3.3. </span>Static method<a class="headerlink" href="#static-method" title="Link to this heading">#</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Company</span><span class="o">.</span><span class="n">get_info_class</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Cong ty Techcombank lam nganh Ngan hang, linh vuc Tai Chinh, dat nuoc VietNam
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">date</span> 

<span class="k">class</span> <span class="nc">Person</span><span class="p">:</span> 
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">):</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">age</span> <span class="o">=</span> <span class="n">age</span> 

    <span class="c1"># a class method to create a Person object by birth year. </span>
    <span class="c1"># class method để tạo ra các factory methods. Các factory methods sẽ trả về đối tượng của lớp (tương tự như một hàm constructor) cho các trường hợp sử dụng khác nhau.</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">fromBirthYear</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">year</span><span class="p">):</span> 
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">date</span><span class="o">.</span><span class="n">today</span><span class="p">()</span><span class="o">.</span><span class="n">year</span> <span class="o">-</span> <span class="n">year</span><span class="p">)</span> 

    <span class="c1"># a static method to check if a Person is adult or not. </span>
    <span class="c1"># static methods để tạo ra các hàm tiện ích (utility functions).</span>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">isAdult</span><span class="p">(</span><span class="n">age</span><span class="p">):</span> 
        <span class="k">return</span> <span class="n">age</span> <span class="o">&gt;</span> <span class="mi">18</span>
    
<span class="n">person1</span> <span class="o">=</span> <span class="n">Person</span><span class="p">(</span><span class="s1">&#39;mayank&#39;</span><span class="p">,</span> <span class="mi">21</span><span class="p">)</span> 
<span class="n">person2</span> <span class="o">=</span> <span class="n">Person</span><span class="o">.</span><span class="n">fromBirthYear</span><span class="p">(</span><span class="s1">&#39;mayank&#39;</span><span class="p">,</span> <span class="mi">1996</span><span class="p">)</span> 

<span class="nb">print</span><span class="p">(</span> <span class="n">person1</span><span class="o">.</span><span class="n">age</span><span class="p">)</span> 
<span class="nb">print</span><span class="p">(</span> <span class="n">person2</span><span class="o">.</span><span class="n">age</span> <span class="p">)</span>

<span class="c1"># print the result </span>
<span class="nb">print</span><span class="p">(</span> <span class="n">Person</span><span class="o">.</span><span class="n">isAdult</span><span class="p">(</span><span class="mi">22</span><span class="p">))</span> 
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Day la Techcombank, nganh Tai Chinh
</pre></div>
</div>
</div>
</div>
</section>
<section id="special-method">
<h4><span class="section-number">1.7.3.4. </span>Special Method<a class="headerlink" href="#special-method" title="Link to this heading">#</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Company</span><span class="p">:</span>
    <span class="c1"># Attribute dac trung cua class</span>
    <span class="n">country</span> <span class="o">=</span> <span class="s2">&quot;VietNam&quot;</span>
    <span class="n">number_of_company</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="c1"># khai bao thuoc tinh</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name_para</span><span class="p">,</span> <span class="n">sector_para</span><span class="p">,</span> <span class="n">industry_para</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name_para</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sector</span> <span class="o">=</span> <span class="n">sector_para</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">industry</span> <span class="o">=</span> <span class="n">industry_para</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stt</span> <span class="o">=</span> <span class="n">Company</span><span class="o">.</span><span class="n">number_of_company</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="n">Company</span><span class="o">.</span><span class="n">number_of_company</span> <span class="o">+=</span> <span class="mi">1</span>
    
    
    <span class="c1"># method khi print object</span>
    <span class="c1"># Nếu  không có phương thức __str__ nào được định nghĩa, thì hàm print t (hoặc print str(t)) sẽ sử dụng __repr__</span>
    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Day la </span><span class="si">{}</span><span class="s2">, nganh </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sector</span><span class="p">)</span>

    <span class="c1"># method khi goi object (output)</span>
    <span class="c1"># Nếu không có phương thức __repr__ nào được định nghĩa, thì phương thức mặc định sẽ được sử dụng.</span>
    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Cong ty </span><span class="si">{}</span><span class="s2"> lam nganh </span><span class="si">{}</span><span class="s2">, linh vuc </span><span class="si">{}</span><span class="s2">, dat nuoc </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">industry</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sector</span><span class="p">,</span>
            <span class="n">Company</span><span class="o">.</span><span class="n">country</span><span class="p">,</span>  <span class="c1"># có thể chứa cả attribute đặc trưng của class</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="c1"># chạy object như hàm khi call ()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;chạy như hàm...&quot;</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># print(&quot;chạy trên method __len__&quot;, len(self.name))</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="s2">&quot;_&quot;</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">name</span>


<span class="n">hpg</span> <span class="o">=</span> <span class="n">Company</span><span class="p">(</span><span class="s2">&quot;Hoa Phat&quot;</span><span class="p">,</span> <span class="s2">&quot;Xay Dung&quot;</span><span class="p">,</span> <span class="s2">&quot;San xuat thep&quot;</span><span class="p">)</span>
<span class="n">tcb</span> <span class="o">=</span> <span class="n">Company</span><span class="p">(</span><span class="s2">&quot;Techcombank&quot;</span><span class="p">,</span> <span class="s2">&quot;Tai Chinh&quot;</span><span class="p">,</span> <span class="s2">&quot;Ngan hang&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;Hoa Phat_Techcombank&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">tcb</span> <span class="c1"># call __str__</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;Hoa Phat_Techcombank&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">tcb</span><span class="p">)</span> <span class="c1"># call __repr__</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>8
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">tcb</span><span class="p">()</span> <span class="c1"># method __call__</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Day la Hoa Phat, nganh Xay Dung
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Company</span><span class="o">.</span><span class="fm">__add__</span><span class="p">(</span><span class="n">hpg</span><span class="p">,</span> <span class="n">tcb</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">hpg</span> <span class="o">+</span> <span class="n">tcb</span> <span class="c1"># method __add__</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">len</span><span class="p">(</span><span class="n">hpg</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">hpg</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>3
Cong ty Vinhomes lam nganh Ban le, linh vuc Nha dat
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="ke-thua">
<h3><span class="section-number">1.7.4. </span>Kế thừa<a class="headerlink" href="#ke-thua" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>tạo một class mới kế thừa các thuộc tính và phương thức của class khác</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Stock</span><span class="p">(</span><span class="n">Company</span><span class="p">):</span>  <span class="c1"># kế thừa thuộc tính của Company, có thể kế thừa nhiều class khác bằng cách Stock(X1,X2,...)</span>

    <span class="n">country</span> <span class="o">=</span> <span class="s2">&quot;VNNNNN&quot;</span>  <span class="c1"># sửa lại attribute, không dùng cái của class cũ</span>
    <span class="n">exchange</span> <span class="o">=</span> <span class="s2">&quot;HOSE&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">name_para</span><span class="p">,</span> <span class="n">sector_para</span><span class="p">,</span> <span class="n">industry_para</span><span class="p">,</span> <span class="n">stock_price_para</span><span class="p">,</span> <span class="n">volumn_stock_para</span>
    <span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">name_para</span><span class="p">,</span> <span class="n">sector_para</span><span class="p">,</span> <span class="n">industry_para</span>
        <span class="p">)</span>  <span class="c1"># Viết lại nhanh attribute trong init constructor của class cũ</span>
        <span class="c1"># or cach khac</span>
        <span class="n">Company</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name_para</span><span class="p">,</span> <span class="n">sector_para</span><span class="p">,</span> <span class="n">industry_para</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stock_price</span> <span class="o">=</span> <span class="n">stock_price_para</span>  <span class="c1"># thêm các attribute của class mới</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">volumn_stock</span> <span class="o">=</span> <span class="n">volumn_stock_para</span>

    <span class="c1"># tạo method mới</span>
    <span class="k">def</span> <span class="nf">trading_values</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stock_price</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">volumn_stock</span><span class="p">)</span>

    <span class="c1"># sua lai method cua class ke thua</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_list</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">lis</span><span class="p">):</span>  <span class="c1"># method get object thường bắt đầu bới from</span>
        <span class="n">name_para</span><span class="p">,</span> <span class="n">industry_para</span><span class="p">,</span> <span class="n">sector_para</span><span class="p">,</span> <span class="n">stock_price_para</span><span class="p">,</span> <span class="n">volumn_stock_para</span> <span class="o">=</span> <span class="n">lis</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span>
            <span class="n">name_para</span><span class="p">,</span> <span class="n">industry_para</span><span class="p">,</span> <span class="n">sector_para</span><span class="p">,</span> <span class="n">stock_price_para</span><span class="p">,</span> <span class="n">volumn_stock_para</span>
        <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Base1
Base2
Derived
Cafedev1 Cafedev2
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">vhm</span> <span class="o">=</span> <span class="n">Stock</span><span class="o">.</span><span class="n">from_list</span><span class="p">([</span><span class="s2">&quot;Vinhomes&quot;</span><span class="p">,</span> <span class="s2">&quot;Nha dat&quot;</span><span class="p">,</span> <span class="s2">&quot;Ban le&quot;</span><span class="p">,</span> <span class="mi">120000</span><span class="p">,</span> <span class="mi">1500000</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># su dung attrubute va method cua class cu</span>
<span class="nb">print</span><span class="p">(</span><span class="n">vhm</span><span class="o">.</span><span class="n">number_of_company</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">vhm</span><span class="o">.</span><span class="n">thongtin</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>13
12
11
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># use attribute va method rieng</span>
<span class="nb">print</span><span class="p">(</span><span class="n">vhm</span><span class="o">.</span><span class="n">country</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">vhm</span><span class="o">.</span><span class="n">trading_values</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>day la 1
day la 2
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># đa kế thừa: kế thừa nhiều class cùng 1 lúc</span>
<span class="c1"># Python example to show working of multiple  </span>
<span class="c1"># inheritance </span>
<span class="k">class</span> <span class="nc">Base1</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span> 
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">str1</span> <span class="o">=</span> <span class="s2">&quot;Cafedev1&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Base1&quot;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Base2</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span> 
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">str2</span> <span class="o">=</span> <span class="s2">&quot;Cafedev2&quot;</span>        
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Base2&quot;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Derived</span><span class="p">(</span><span class="n">Base1</span><span class="p">,</span> <span class="n">Base2</span><span class="p">):</span> 
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 

        <span class="c1"># Calling constructors of Base1 </span>
        <span class="c1"># and Base2 classes </span>
        <span class="n">Base1</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> 
        <span class="n">Base2</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> 
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Derived&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">printStrs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
        <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">str1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">str2</span><span class="p">)</span> 


<span class="n">ob</span> <span class="o">=</span> <span class="n">Derived</span><span class="p">()</span> 
<span class="n">ob</span><span class="o">.</span><span class="n">printStrs</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="iterators-and-generators">
<h3><span class="section-number">1.7.5. </span>Iterators and Generators<a class="headerlink" href="#iterators-and-generators" title="Link to this heading">#</a></h3>
<p>Iterators là các đối tượng mà chúng ta có thể thực hiện các phép lặp/duyệt trên chúng.</p>
<p>– Python sử dụng phương thức <code class="docutils literal notranslate"><span class="pre">__iter__()</span></code> để trả về một đối tượng iterator của class</p>
<p>– Đối tượng <code class="docutils literal notranslate"><span class="pre">iterator</span></code> sau đó sẽ sử dụng phương thức <code class="docutils literal notranslate"><span class="pre">__next__()</span></code> để lấy được next item – phần tử tiếp theo.</p>
<p>– Vòng lặp for sẽ dừng lại khi ngoại lệ <code class="docutils literal notranslate"><span class="pre">StopIteration</span> <span class="pre">Exception</span></code> được kích hoạt.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">PrintList</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>         
  
    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
        <span class="k">return</span> <span class="bp">self</span>
      
    <span class="k">def</span> <span class="fm">__next__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">index</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> 
            <span class="k">raise</span> <span class="ne">StopIteration</span>     
        <span class="bp">self</span><span class="o">.</span><span class="n">index</span><span class="o">-=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">index</span><span class="p">]</span> <span class="o">+</span> <span class="mi">10</span>
    
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">PrintList</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>India 1111
India 2222
India 3333
USA 1111
USA 2222
USA 3333
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Sử dụng generator là một cách khác để tạo ra các iterators</span>

<span class="k">class</span> <span class="nc">cophieu</span><span class="p">():</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        
    <span class="k">def</span> <span class="nf">inLanLuot</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">:</span>
            <span class="k">yield</span> <span class="s1">&#39;day la &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
            
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">cophieu</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">])</span><span class="o">.</span><span class="n">inLanLuot</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="da-hinh">
<h3><span class="section-number">1.7.6. </span>Đa hình<a class="headerlink" href="#da-hinh" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># ghi đè phương thức</span>
<span class="k">class</span> <span class="nc">Bird</span><span class="p">:</span> 
  <span class="k">def</span> <span class="nf">intro</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;There are many types of birds.&quot;</span><span class="p">)</span> 
      
  <span class="k">def</span> <span class="nf">flight</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Most of the birds can fly but some cannot.&quot;</span><span class="p">)</span> 
    
<span class="k">class</span> <span class="nc">sparrow</span><span class="p">(</span><span class="n">Bird</span><span class="p">):</span> 
  <span class="k">def</span> <span class="nf">flight</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Sparrows can fly.&quot;</span><span class="p">)</span> 
      
<span class="k">class</span> <span class="nc">ostrich</span><span class="p">(</span><span class="n">Bird</span><span class="p">):</span> 
  <span class="k">def</span> <span class="nf">flight</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Ostriches cannot fly.&quot;</span><span class="p">)</span> 
      
<span class="n">obj_bird</span> <span class="o">=</span> <span class="n">Bird</span><span class="p">()</span> 
<span class="n">obj_spr</span> <span class="o">=</span> <span class="n">sparrow</span><span class="p">()</span> 
<span class="n">obj_ost</span> <span class="o">=</span> <span class="n">ostrich</span><span class="p">()</span> 
  
<span class="n">obj_bird</span><span class="o">.</span><span class="n">intro</span><span class="p">()</span> 
<span class="n">obj_bird</span><span class="o">.</span><span class="n">flight</span><span class="p">()</span> 
  
<span class="n">obj_spr</span><span class="o">.</span><span class="n">intro</span><span class="p">()</span> 
<span class="n">obj_spr</span><span class="o">.</span><span class="n">flight</span><span class="p">()</span> 
  
<span class="n">obj_ost</span><span class="o">.</span><span class="n">intro</span><span class="p">()</span> 
<span class="n">obj_ost</span><span class="o">.</span><span class="n">flight</span><span class="p">()</span> 
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">India</span><span class="p">():</span> 
    <span class="k">def</span> <span class="nf">capital</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;India 1111&quot;</span><span class="p">)</span> 

    <span class="k">def</span> <span class="nf">language</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;India 2222&quot;</span><span class="p">)</span> 

    <span class="k">def</span> <span class="nf">type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;India 3333&quot;</span><span class="p">)</span> 

<span class="k">class</span> <span class="nc">USA</span><span class="p">():</span> 
    <span class="k">def</span> <span class="nf">capital</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;USA 1111&quot;</span><span class="p">)</span> 

    <span class="k">def</span> <span class="nf">language</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;USA 2222&quot;</span><span class="p">)</span> 

    <span class="k">def</span> <span class="nf">type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;USA 3333&quot;</span><span class="p">)</span> 

<span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span> 
    <span class="n">obj</span><span class="o">.</span><span class="n">capital</span><span class="p">()</span> 
    <span class="n">obj</span><span class="o">.</span><span class="n">language</span><span class="p">()</span> 
    <span class="n">obj</span><span class="o">.</span><span class="n">type</span><span class="p">()</span> 

<span class="n">obj_ind</span> <span class="o">=</span> <span class="n">India</span><span class="p">()</span> 
<span class="n">obj_usa</span> <span class="o">=</span> <span class="n">USA</span><span class="p">()</span> 

<span class="n">func</span><span class="p">(</span><span class="n">obj_ind</span><span class="p">)</span> 
<span class="n">func</span><span class="p">(</span><span class="n">obj_usa</span><span class="p">)</span> 
</pre></div>
</div>
</div>
</div>
</section>
<section id="id1">
<h3><span class="section-number">1.7.7. </span>Lớp decorator<a class="headerlink" href="#id1" title="Link to this heading">#</a></h3>
<p>Xử lý cho hàm deco phức tạp</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">decoclass</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">f</span> <span class="o">=</span> <span class="n">f</span>
    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="c1"># logic trước khi gọi hàm f</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;decorator initialised&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;decorator terminated&#39;</span><span class="p">)</span>
        <span class="c1"># logic sau khi gọi hàm f</span>

<span class="nd">@decoclass</span>
<span class="k">def</span> <span class="nf">hello</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="n">name2</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Hello, </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s1">. Welcome to </span><span class="si">{</span><span class="n">name2</span><span class="si">}</span><span class="s1"> heaven!&#39;</span><span class="p">)</span>

<span class="n">hello</span><span class="p">(</span><span class="s1">&#39;XXX&#39;</span><span class="p">,</span><span class="s1">&#39;YYY&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>return  0
return  1
return  2
runtime =  0:00:03.016835
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># tạo hàm decorator tính time</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">sleep</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># tạo hàm decorator tính time</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">sleep</span>

<span class="k">class</span> <span class="nc">decoclass</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">f</span> <span class="o">=</span> <span class="n">f</span>
    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="c1"># logic trước khi gọi hàm f</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;decorator initialised&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;decorator terminated&#39;</span><span class="p">)</span>
        <span class="c1"># logic sau khi gọi hàm f</span>
        
    <span class="k">def</span> <span class="nf">runtime</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">*</span><span class="n">arg</span><span class="p">):</span>
        <span class="n">start</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
        <span class="n">decoclass</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;runtime = &quot;</span><span class="p">,</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">-</span><span class="n">start</span><span class="p">)</span>
        
<span class="nd">@decoclass</span><span class="o">.</span><span class="n">runtime</span>
<span class="k">def</span> <span class="nf">print_second1</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;return &#39;</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
        <span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        
<span class="n">print_second1</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">runtime</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="n">start</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
    <span class="n">f</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;runtime = &quot;</span><span class="p">,</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">-</span><span class="n">start</span><span class="p">)</span>
    
<span class="nd">@runtime</span>
<span class="k">def</span> <span class="nf">print_second</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;return &#39;</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
        <span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        
<span class="n">print_second</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>An
Viet
Khong-Dat@team.com
An Viet
</pre></div>
</div>
</div>
</div>
</section>
<section id="id2">
<h3><span class="section-number">1.7.8. </span>Special decorator<a class="headerlink" href="#id2" title="Link to this heading">#</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>    <span class="nd">@property</span> <span class="p">:</span> <span class="n">biến</span> <span class="n">method</span> <span class="n">thành</span> <span class="n">attribute</span>
    <span class="o">@</span><span class="s2">&quot;method&quot;</span><span class="o">.</span><span class="n">setter</span> <span class="p">:</span> <span class="n">gán</span> <span class="n">value</span> <span class="n">cho</span> <span class="n">method</span><span class="p">(</span><span class="n">có</span> <span class="nb">property</span><span class="p">),</span> <span class="n">có</span> <span class="n">thể</span> <span class="n">sửa</span> <span class="n">các</span> <span class="n">attribute</span> <span class="n">ban</span> <span class="n">đầu</span> <span class="n">có</span> <span class="n">liên</span> <span class="n">quan</span>
    <span class="o">@</span><span class="s2">&quot;method&quot;</span><span class="o">.</span><span class="n">deleter</span> <span class="p">:</span> <span class="n">xóa</span> <span class="n">value</span> <span class="n">cho</span> <span class="n">method</span><span class="p">(</span><span class="n">có</span> <span class="nb">property</span><span class="p">),</span> <span class="n">có</span> <span class="n">thể</span> <span class="n">xóa</span> <span class="n">các</span> <span class="n">attribute</span> <span class="n">ban</span> <span class="n">đầu</span> <span class="n">có</span> <span class="n">liên</span> <span class="n">quan</span>
</pre></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Teamm</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ho</span><span class="p">,</span> <span class="n">ten</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ho</span> <span class="o">=</span> <span class="n">ho</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ten</span> <span class="o">=</span> <span class="n">ten</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">email</span> <span class="o">=</span> <span class="n">ho</span> <span class="o">+</span> <span class="s2">&quot;-&quot;</span> <span class="o">+</span> <span class="n">ten</span> <span class="o">+</span> <span class="s2">&quot;@team.com&quot;</span>

    <span class="k">def</span> <span class="nf">ho_va_ten</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>  <span class="c1"># regular method</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ho</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ten</span><span class="p">)</span>


<span class="n">ktd</span> <span class="o">=</span> <span class="n">Teamm</span><span class="p">(</span><span class="s2">&quot;Khong&quot;</span><span class="p">,</span> <span class="s2">&quot;Dat&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;Khanh&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">ktd</span><span class="o">.</span><span class="n">ho</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ktd</span><span class="o">.</span><span class="n">ten</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ktd</span><span class="o">.</span><span class="n">email</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ktd</span><span class="o">.</span><span class="n">ho_va_ten</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>None
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># thử modify attribute</span>
<span class="n">ktd</span><span class="o">.</span><span class="n">ho</span> <span class="o">=</span> <span class="s2">&quot;An&quot;</span>
<span class="n">ktd</span><span class="o">.</span><span class="n">ten</span> <span class="o">=</span> <span class="s2">&quot;Viet&quot;</span>

<span class="nb">print</span><span class="p">(</span><span class="n">ktd</span><span class="o">.</span><span class="n">ho</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ktd</span><span class="o">.</span><span class="n">ten</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ktd</span><span class="o">.</span><span class="n">email</span><span class="p">)</span>  <span class="c1"># email ko bị đổi theo</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ktd</span><span class="o">.</span><span class="n">ho_va_ten</span><span class="p">())</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Teamm</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ho</span><span class="p">,</span> <span class="n">ten</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ho</span> <span class="o">=</span> <span class="n">ho</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ten</span> <span class="o">=</span> <span class="n">ten</span>

    <span class="nd">@property</span>  <span class="c1"># bien method thanh attribute</span>
    <span class="k">def</span> <span class="nf">email</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>  <span class="c1"># regular method</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ho</span> <span class="o">+</span> <span class="s2">&quot;_&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">ten</span> <span class="o">+</span> <span class="s2">&quot;@team.com&quot;</span>

    <span class="nd">@property</span>  <span class="c1"># bien method thanh attribute</span>
    <span class="k">def</span> <span class="nf">ho_va_ten</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>  <span class="c1"># regular method</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ho</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ten</span><span class="p">)</span>

    <span class="nd">@ho_va_ten</span><span class="o">.</span><span class="n">setter</span>  <span class="c1"># method ho_va_ten có thể gán giá trị và sửa giá trị attribute ho, ten</span>
    <span class="k">def</span> <span class="nf">ho_va_ten</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ten_moi</span><span class="p">):</span>
        <span class="n">ho_moi</span><span class="p">,</span> <span class="n">ten_moi</span> <span class="o">=</span> <span class="n">ten_moi</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ho</span> <span class="o">=</span> <span class="n">ho_moi</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ten</span> <span class="o">=</span> <span class="n">ten_moi</span>

    <span class="nd">@ho_va_ten</span><span class="o">.</span><span class="n">deleter</span>  <span class="c1"># method ho_va_ten có thể gán giá trị và sửa giá trị attribute ho, ten</span>
    <span class="k">def</span> <span class="nf">ho_va_ten</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ho</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ten</span> <span class="o">=</span> <span class="kc">None</span>


<span class="n">ktd</span> <span class="o">=</span> <span class="n">Teamm</span><span class="p">(</span><span class="s2">&quot;Khong&quot;</span><span class="p">,</span> <span class="s2">&quot;Dat&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ktd</span><span class="o">.</span><span class="n">ho_va_ten</span> <span class="o">=</span> <span class="s2">&quot;An Khanh&quot;</span>
<span class="n">ktd</span><span class="o">.</span><span class="n">ten</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">del</span> <span class="n">ktd</span><span class="o">.</span><span class="n">ho_va_ten</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ktd</span><span class="o">.</span><span class="n">ten</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="metaclass">
<h3><span class="section-number">1.7.9. </span>Metaclass<a class="headerlink" href="#metaclass" title="Link to this heading">#</a></h3>
<p>Hầu hết thời gian chúng ta sẽ không sử dụng các metaclasses, chúng giống như là ma thuật đen vậy, và thường được coi là một thứ gì đó hết sức phức tạp, nhưng vẫn có một số trường hợp mà chúng ta sử dụng đến các metaclasses, đó là:</p>
<p>– Như chúng ta đã thấy trong ví dụ trên, các metaclasses sẽ lan truyền từ trên xuống dưới trong hệ thống phân cấp thừa kế (inheritance hierachy). Do đó nó cũng sẽ ảnh hưởng đến tất cả các lớp con. Nếu gặp trường hợp như vậy, chúng ta nên sử dụng các metaclasses.</p>
<p>– Khi chúng ta muốn thay đổi các classes một cách tự động, khi nó được tạo ra.</p>
<p>– Nếu bạn là một API developer, bạn có thể sử dụng các metaclasses.</p>
<p>Và có một trích dẫn của ông Tim Peters như sau:</p>
<p>“Metaclasses là loại ma thuật sâu sắc mà 99% người dùng không bao giờ nên lo lắng về chúng. Nếu bạn phân vân liệu rằng mình có cần tới chúng hay không, điều đó có nghĩa là bạn không cần tới chúng đâu (người mà thật sự cần tới chúng sẽ biết chắc chắn rằng họ cần chúng, mà không cần phải tìm kiểm câu trả lời cho lý do vì sao”.</p>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./contents\1_programming_and_frameworks"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="../../_jupyterbook_config/intro.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Welcome to Dat’s Notebook</p>
      </div>
    </a>
    <a class="right-next"
       href="2_NoSQL.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">2. </span>NoSQL</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#variable-name">1.1. Variable name</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#python-types">1.2. Python Types</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#numbers">1.2.1. Numbers</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#string">1.2.2. String</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#boolean">1.2.3. Boolean</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#lists">1.2.4. Lists</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dictionaries">1.2.5. Dictionaries</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#tuples">1.2.6. Tuples</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#sets">1.2.7. Sets</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#functions">1.3. Functions</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#def">1.3.1. def</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#lambda">1.3.2. lambda</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#advanced-python">1.4. Advanced Python</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#comprehensions">1.4.1. Comprehensions</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#map-filter-reduce">1.4.2. Map Filter Reduce</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#any-all">1.4.3. Any All</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#generators">1.4.4. Generators</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exceptions">1.4.5. Exceptions</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#file-io">1.4.6. File IO</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#regex">1.4.7. Regex</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#multi-threading">1.5. Multi-threading</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#multithreading">1.5.1. MultiThreading</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#ke-thua-class-thread">1.5.1.1. Kế thừa class Thread</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#co-che-thread-lock">1.5.1.2. Cơ chế Thread Lock</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#processing">1.5.2. Processing</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#khoi-tao">1.5.2.1. Khởi tạo</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#process-lock">1.5.2.2. process lock</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#share-memory">1.5.2.3. Share memory</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#share-object">1.5.2.4. Share object</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pool-trong-multiprocessing">1.5.3. Pool trong multiprocessing</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#process-pool-voi-concurrent-futures">1.5.4. Process Pool với concurrent.futures</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#thread-pool">1.5.5. Thread Pool</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#so-sanh-process-pool-va-thread-pool">1.5.6. so sánh process pool và thread pool</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#queue">1.5.7. Queue</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#decorators">1.6. Decorators</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#co-ban-ham-decorator">1.6.1. Cơ bản hàm decorator</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#lop-decorator">1.6.2. Lớp decorator</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#special-decorator">1.6.3. Special decorator</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#decorator-memorization">1.6.4. Decorator memorization</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#go-loi-bang-decorator">1.6.5. Gỡ lỗi bằng decorator</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#class">1.7. Class</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#ham-constructor-initialize-method">1.7.1. Hàm constructor (initialize method)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#attribute">1.7.2. Attribute</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#method">1.7.3. Method</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#regular-method">1.7.3.1. regular method</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#class-method">1.7.3.2. Class method</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#static-method">1.7.3.3. Static method</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#special-method">1.7.3.4. Special Method</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#ke-thua">1.7.4. Kế thừa</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#iterators-and-generators">1.7.5. Iterators and Generators</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#da-hinh">1.7.6. Đa hình</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">1.7.7. Lớp decorator</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">1.7.8. Special decorator</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#metaclass">1.7.9. Metaclass</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Khổng Tiến Đạt
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>